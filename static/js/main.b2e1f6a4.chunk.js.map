{"version":3,"sources":["Controls.js","Main/index.js","App.js","reportWebVitals.js","index.js"],"names":["Controls","props","useThree","camera","domElement","gl","controls","useRef","useFrame","current","update","ref","args","extend","OrbitControls","AnimationBox","d","t","children","springXZ","useSpring","from","to","loop","reverse","config","duration","springY","position","z","Math","cos","get","x","sin","y","group","getLenterns","LanternOfGLTF","floor","random","url","Scene","useState","Lenterns","setLenterns","addLenterns","useCallback","prev","useSkybox","intensity","Effects","fallback","useMemo","MainLentern","Main","style","width","height","zIndex","translate","onCreated","state","setClearColor","colorManagement","shadowMap","fov","easeInSine","PI","easeOutSine","easeInOutSine","setIntensity","closeTimeoutRef","checkPoint1","useSpringRef","lenternPosition1","cameraPosition1","checkPointAPI1","checkPoint2","lenternPosition2","cameraPosition2","cameraLookAt2","checkPointAPI2","checkPoint3","lenternPosition3","cameraPosition3","cameraLookAt3","checkPointAPI3","checkPoint4","cameraPosition4","cameraLookAt4","checkPointAPI4","checkPoint5","lenternPosition5","checkPointAPI5","checkPoint6","lenternPosition6","checkPointAPI6","l_x1","l_y1","l_z1","l_x2","l_y2","l_z2","l_x3","l_y3","l_z3","l_x5","l_y5","l_z5","l_x6","l_y6","l_z6","c_x1","c_y1","c_x2","c_y2","c_x3","c_y3","c_x4","c_y4","cl_y2","cl_y3","cl_y4","cameraX","cameraY","lookAt","THREE","useEffect","map","close","animationStart","a","easing","setTimeout","animationReset","onClick","distance","scene","useGLTF","copiedScene","clone","console","log","scale","object","imagePaths","img","mat","load","background","environment","blurPass","undefined","Resizer","AUTO_SIZE","kernelSize","KernelSize","LARGE","luminanceThreshold","luminanceSmoothing","opacity","eskil","offset","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"2QAMe,SAASA,EAASC,GAC/B,MAGIC,cAFFC,EADF,EACEA,OACMC,EAFR,EAEEC,GAAMD,WAEFE,EAAWC,iBAAO,IAGxB,OADAC,aAAS,kBAAMF,EAASG,QAAQC,YAE9B,yDAAmBT,GAAnB,IAA0BU,IAAKL,EAAUM,KAAM,CAACT,EAAQC,MAX5DS,YAAO,CAAEC,oB,6DC6CT,SAASC,EAAT,GAA2C,IAAnBC,EAAkB,EAAlBA,EAAGC,EAAe,EAAfA,EAAGC,EAAY,EAAZA,SACpBP,EAAMJ,mBAEJY,EAAaC,oBAAU,CAC7BC,KAAM,CAAEF,UAAW,GACnBG,GAAI,CAAEH,SAAU,GAChBI,KAAM,CAAEC,SAAS,GACjBC,OAAQ,CACNC,SAAUT,EAAI,EAAI,KALdE,SAaAQ,EAAYP,oBAAU,CAC1BC,KAAM,CAAEM,SAAU,GAClBL,GAAI,CAAEK,QAAS,GACfJ,KAAM,CAAEC,SAAS,GACjBC,OAAQ,CACNC,SAAUT,KALRU,QAsBR,OANAnB,aAAS,WACPG,EAAIF,QAAQmB,SAASC,EAAIC,KAAKC,IAAIZ,EAASa,OAAShB,EAAI,EACxDL,EAAIF,QAAQmB,SAASK,EAAIH,KAAKI,IAAIf,EAASa,OAAShB,EAAI,EACxDL,EAAIF,QAAQmB,SAASO,EAAIL,KAAKI,IAAIP,EAAQK,OAAShB,KAKnD,aADA,CACC,IAAEoB,MAAH,CAASzB,IAAKA,EAAd,SACGO,IAgBT,IAAMmB,EAAc,WAClB,OAAO,cAACC,EAAD,CAAeL,EAAGH,KAAKS,MAAsB,IAAhBT,KAAKU,UAAiBL,EAAGL,KAAKS,MAAsB,GAAhBT,KAAKU,UAAgBX,EAAGC,KAAKS,MAAsB,IAAhBT,KAAKU,SAAiB,IAAKC,IAAI,mBAG5I,SAASC,IACP,MAAgCC,mBAAS,CAACN,IAAeA,IAAeA,MAAxE,mBAAOO,EAAP,KAAiBC,EAAjB,KAEMC,EAAcC,uBAAY,WAC9BF,GAAY,SAAAG,GAAI,4BAAQA,GAAR,CAAcX,WAC7B,IAIH,OAFAY,IAGE,qCACE,4BAAYrB,SAAU,CAAC,GAAI,GAAI,GAAIsB,UAAW,MAC9C,cAACC,EAAD,IACA,eAAC,WAAD,CAAUC,SAAU,6BAApB,UAGI,cAACrC,EAAD,CAAeE,EAAG,IAAMD,EAAG,GAA3B,SACC4B,IAED,4BAAYhB,SAAU,CAAC,GAAI,EAAG,IAAKsB,UAAW,MAC7CG,mBAAQ,kBAAM,cAACC,EAAD,CAAaR,YAAaA,EAAab,GAAI,EAAGE,GAAI,EAAGN,EAAG,OAAQ,CAACiB,UAS3E,SAASS,IACtB,OACE,qBAAKC,MAAO,CAAC5B,SAAS,WAAY6B,MAAO,OAAQC,OAAQ,OAAQC,OAAQ,KAAzE,SACE,eAAC,IAAD,CACEC,WAAW,EACXC,UAAW,SAAAC,GAAK,OAAIA,EAAMzD,GAAG0D,cAAe,SAAU,IACtDC,iBAAe,EACfC,WAAS,EACT9D,OAAQ,CAAEyB,SAAU,CAAC,EAAG,EAAG,IAAKsC,IAAK,IALvC,UAOE,cAACxB,EAAD,IACA,cAAC1C,EAAD,IACA,oCAMR,SAASmE,EAAWlC,GAClB,OAAO,EAAIH,KAAKC,IAAKE,EAAIH,KAAKsC,GAAM,GAEtC,SAASC,EAAYpC,GACnB,OAAOH,KAAKI,IAAKD,EAAIH,KAAKsC,GAAM,GAElC,SAASE,EAAcrC,GACrB,QAASH,KAAKC,IAAID,KAAKsC,GAAKnC,GAAK,GAAK,EAGxC,SAASqB,EAAT,GAAiD,IAAzBR,EAAwB,EAAxBA,YAAab,EAAW,EAAXA,EAAGE,EAAQ,EAARA,EAAGN,EAAK,EAALA,EACzC,EAAkCc,mBAAS,GAA3C,mBAAOO,EAAP,KAAkBqB,EAAlB,KACM5D,EAAMJ,mBACNiE,EAAkBjE,iBAAO,IAGzBkE,EAAcC,yBACpB,EAAgEtD,qBAAU,iBAAO,CAC/EuD,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,GACrBjE,IAAK8D,MAHP,0BAASE,EAAT,EAASA,iBAAkBC,EAA3B,EAA2BA,gBAAmBC,EAA9C,KAKMC,EAAcJ,yBACpB,EAA+EtD,qBAAU,iBAAO,CAC9F2D,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,GACrBC,cAAe,CAAC,GAChBtE,IAAKmE,MAJP,0BAASC,EAAT,EAASA,iBAAkBC,EAA3B,EAA2BA,gBAAiBC,EAA5C,EAA4CA,cAAiBC,EAA7D,KAMMC,EAAcT,yBACpB,EAA+EtD,qBAAU,iBAAO,CAC9FgE,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,GACrBC,cAAe,CAAC,GAChB3E,IAAKwE,MAJP,0BAASC,EAAT,EAASA,iBAAkBC,EAA3B,EAA2BA,gBAAiBC,EAA5C,EAA4CA,cAAiBC,EAA7D,KAMMC,EAAcd,yBACpB,EAA6DtD,qBAAU,iBAAO,CAC5EqE,gBAAiB,CAAC,EAAG,GACrBC,cAAe,CAAC,GAChB/E,IAAK6E,MAHP,0BAASC,EAAT,EAASA,gBAAiBC,EAA1B,EAA0BA,cAAiBC,EAA3C,KAKMC,EAAclB,yBACpB,GAA+CtD,qBAAU,iBAAO,CAC9DyE,iBAAkB,CAAC,EAAG,EAAG,GACzBlF,IAAKiF,MAFP,qBAASC,GAAT,MAASA,iBAAoBC,GAA7B,MAIMC,GAAcrB,yBACpB,GAA+CtD,qBAAU,iBAAO,CAC9D4E,iBAAkB,CAAC,EAAG,EAAG,GACzBrF,IAAKoF,OAFP,qBAASC,GAAT,MAASA,iBAAoBC,GAA7B,MAKAzF,aAAS,SAACsD,GAER,MAA2Ba,EAAiB3C,MAA5C,mBAAOkE,EAAP,KAAaC,EAAb,KAAmBC,EAAnB,KACA,EAA2BrB,EAAiB/C,MAA5C,mBAAOqE,EAAP,KAAaC,EAAb,KAAmBC,EAAnB,KACA,EAA2BnB,EAAiBpD,MAA5C,mBAAOwE,EAAP,KAAaC,EAAb,KAAmBC,EAAnB,KACA,EAA2Bb,GAAiB7D,MAA5C,mBAAO2E,EAAP,KAAaC,EAAb,KAAmBC,EAAnB,KACA,EAA2Bb,GAAiBhE,MAA5C,mBAAO8E,EAAP,KAAaC,EAAb,KAAmBC,EAAnB,KAEA,EAAqBpC,EAAgB5C,MAArC,mBAAOiF,EAAP,KAAaC,EAAb,KACA,EAAqBlC,EAAgBhD,MAArC,mBAAOmF,EAAP,KAAaC,EAAb,KACA,EAAqB/B,EAAgBrD,MAArC,mBAAOqF,EAAP,KAAaC,EAAb,KACA,EAAqB7B,EAAgBzD,MAArC,mBAAOuF,EAAP,KAAaC,GAAb,KAGA,GAAgBvC,EAAcjD,MAAvByF,GAAP,qBACA,GAAgBnC,EAActD,MAAvB0F,GAAP,qBACA,GAAgBhC,EAAc1D,MAAvB2F,GAAP,qBAEMC,GAAUX,EAAOE,EAAOE,EAAOE,EAC/BM,GAAUX,EAAOE,EAAOE,EAAOE,GACrC1D,EAAM3D,OAAO2H,OAAO,IAAIC,UAAcH,GAASC,GAAUJ,GAAQC,GAAQC,GAAO,IAChF7D,EAAM3D,OAAOyB,SAASK,EAAI2F,GAC1B9D,EAAM3D,OAAOyB,SAASO,EAAI0F,GAE1BlH,EAAIF,QAAQmB,SAASK,EAAIiE,EAAOG,EAAOG,EAAOG,EAAOG,EACrDnG,EAAIF,QAAQmB,SAASO,EAAIgE,EAAOG,EAAOG,EAAOG,EAAOG,EACrDpG,EAAIF,QAAQmB,SAASC,EAAIuE,EAAOG,EAAOG,EAAOG,EAAOG,KAGvDgB,qBAAU,kBAAM,WACdxD,EAAgB/D,QAAQwH,KAAI,SAAAC,GAAK,OAAIA,GAASA,EAAMzH,gBACnD,IAEH,IAAM0H,GAAc,uCAAG,sBAAAC,EAAA,sDAGrBvD,GAAe,iBAAO,CACpBF,iBAAkB,CAAC,GAAI,IAAK,GAC5BC,gBAAiB,CAAC,GAAI,GAAI,GAC1BnD,OAAQ,CAAEC,SAAU,IAAM2G,OAAQlE,OAEpCK,EAAgB/D,QAAQ,GAAK6H,YAAW,WACtCpD,EAAe,CACbH,iBAAkB,CAAC,GAAI,IAAK,IAC5BC,gBAAiB,CAAC,EAAG,EAAG,GACxBC,cAAe,CAAC,EAAG,EAAG,GACtBxD,OAAQ,CAAEC,SAAU,SAErB,KACH8C,EAAgB/D,QAAQ,GAAK6H,YAAW,WACtC/C,EAAe,CACbH,iBAAkB,CAAC,GAAI,IAAK,IAC5BC,gBAAiB,CAAC,EAAG,EAAG,GACxBC,cAAe,CAAC,EAAG,EAAG,GACtB7D,OAAQ,CAAEC,SAAU,IAAM2G,OAAQhE,OAEnC,MACHG,EAAgB/D,QAAQ,GAAK6H,YAAW,WACtC3C,EAAe,CACbF,gBAAiB,EAAE,IAAK,GAAI,GAC5BC,cAAe,CAAC,GAAI,EAAG,GACvBjE,OAAQ,CAAEC,SAAU,IAAM2G,OAAQ/D,OAEnC,MACHE,EAAgB/D,QAAQ,GAAK6H,YAAW,WAItCxC,GAAe,CACbD,iBAAkB,EAAE,IAAK,GAAI,IAC7BpE,OAAQ,CAAEC,SAAU,OAErB,MACH8C,EAAgB/D,QAAQ,GAAK6H,YAAW,WACtCrC,GAAe,CACbD,iBAAkB,CAAC,EAAG,EAAG,IACzBvE,OAAQ,CAAEC,SAAU,IAAM2G,OAAQ/D,OAEnC,MAEHE,EAAgB/D,QAAQ,GAAK6H,YAAW,WACtCC,OACC,KAjDkB,2CAAH,qDAoDdA,GAAc,uCAAG,sBAAAH,EAAA,sDACrBvD,GAAe,iBAAO,CACpBF,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,EAAG,GACxBnD,OAAQ,CAAEC,SAAU,OAEtBwD,EAAe,CACbH,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,EAAG,GACxBC,cAAe,CAAC,EAAG,EAAG,GACtBxD,OAAQ,CAAEC,SAAU,KAEtB6D,EAAe,CACbH,iBAAkB,CAAC,EAAG,EAAG,GACzBC,gBAAiB,CAAC,EAAG,EAAG,GACxBC,cAAe,CAAC,EAAG,EAAG,GACtB7D,OAAQ,CAAEC,SAAU,KAEtBiE,EAAe,CACbF,gBAAiB,CAAC,EAAG,EAAG,GACxBC,cAAe,CAAC,EAAG,EAAG,GACtBjE,OAAQ,CAAEC,SAAU,KAMtBoE,GAAe,CACbD,iBAAkB,CAAC,EAAG,EAAG,GACzBpE,OAAQ,CAAEC,SAAU,KAEtBuE,GAAe,CACbD,iBAAkB,CAAC,EAAG,EAAG,GACzBvE,OAAQ,CAAEC,SAAU,KAGtBoB,IApCqB,2CAAH,qDAwCpB,OACE,uBAAMnC,IAAKA,EAAK6H,QAAS,WACvBjE,EAAarB,EAAY,IACzBiF,MAFF,UAKE,4BAAYM,SAAU,GAAI7G,SAAU,CAAEK,EAAGE,EAAI,EAAGN,EAAI,GAAIqB,UAAWA,IACnE,4BAAYtB,SAAU,CAAEK,EAAGE,EAAI,IAAKN,EAAI,GAAIqB,UAAW,KACtDG,mBAAQ,kBAAM,cAACf,EAAD,CAAeL,EAAGA,EAAGE,EAAGA,EAAGN,EAAGA,EAAGY,IAAI,oBAAmB,CAACR,EAAGE,EAAGN,OCpU7E,SAASS,EAAT,GAAyC,IAAhBL,EAAe,EAAfA,EAAGE,EAAY,EAAZA,EAAGN,EAAS,EAATA,EAAGY,EAAM,EAANA,IAChCiG,EAASC,YAAQlG,GAAjBiG,MACDE,EAAcvF,mBAAQ,kBAAMqF,EAAMG,UAAS,CAACH,IAGlD,OAFAI,QAAQC,IAAIH,GAELA,EAAc,uBAAOhH,SAAU,CAACK,EAAEE,EAAEN,GAAImH,MAAO,KAAjC,SACnB,2BAAWC,OAAQL,MACV,KAQb,IAGMM,EAFS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MAEpBjB,KAAI,SAAAkB,GAAG,MAHpB,qBAG+BA,EADhC,UAGClG,EAAY,WACvB,IAAQyF,EAAUxI,cAAVwI,MASR,OAPAV,qBAAU,WACR,IACMoB,GADS,IAAIrB,qBACAsB,KAAKH,GACxBR,EAAMY,WAAaF,EACnBV,EAAMa,YAAcH,IACnB,CAACV,IAEG,MAqBF,SAASvF,IAEd,OACE,eAAC,IAAD,WAGE,cAAC,IAAD,CACED,UAAW,EACXsG,cAAUC,EACVhG,MAAOiG,IAAQC,UACfjG,OAAQgG,IAAQC,UAChBC,WAAYC,IAAWC,MACvBC,mBAAoB,EACpBC,mBAAoB,OAEtB,cAAC,IAAD,CAAOC,QAAS,MAChB,cAAC,IAAD,CAAUC,OAAO,EAAOC,OAAQ,QAKtC,SAASzH,IAEP,OADAO,IACO,KAGM,SAASmH,IAGtB,OACE,qCACE,cAAC,EAAD,IACA,qBAAK5G,MAAO,CAAC5B,SAAS,WAAY6B,MAAO,OAAQC,OAAQ,QAAzD,SACE,eAAC,IAAD,CACEE,WAAW,EACXI,iBAAe,EACfC,WAAS,EACT9D,OAAQ,CAAEyB,SAAU,EAAE,EAAG,EAAG,GAAIsC,IAAK,IAJvC,UAME,cAAC,EAAD,IACA,cAAClE,EAAD,IACA,uCC/GV,IAYeqK,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCAdQ,IAASC,OACP,cAACX,EAAD,IAEAY,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.b2e1f6a4.chunk.js","sourcesContent":["import React, { useRef } from 'react';\nimport { extend,  useThree, useFrame } from '@react-three/fiber';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nextend({ OrbitControls });\n\nexport default function Controls(props){\n  const {\n    camera,\n    gl: { domElement },\n  } = useThree();\n  const controls = useRef({});\n\n  useFrame(() => controls.current.update());\n  return (\n    <orbitControls {...props} ref={controls} args={[camera, domElement]} />\n  );\n};\n","import React, { Suspense, useRef, useState, useMemo, useEffect, useCallback } from 'react';\nimport * as THREE from 'three';\nimport { Canvas, useFrame, useLoader } from '@react-three/fiber';\n// import { Stars } from '@react-three/drei';\nimport { TextureLoader } from 'three/src/loaders/TextureLoader.js';\n\nimport Controls from '../Controls';\n\nimport { useSpring, a, useSpringRef } from \"@react-spring/three\";\n\nimport { LanternOfGLTF, Effects, useSkybox } from '../App'\n\nexport const Background = () => {\n  const texture = useLoader(TextureLoader, './background.jpg');\n  \n  return (\n    <mesh>\n      <planeGeometry attach=\"geometry\" args={[1440 / 10, 718 / 10]} />\n      {texture && <meshBasicMaterial attach=\"material\" map={texture} />}\n    </mesh>\n  );\n};\n\n// function FloatingBox() {\n//     const ref = useRef()\n//     // const props = useSpring({\n//     //     position: expand ? [1.4, 1.4, 1.4] : [1, 1, 1],\n//     // });\n//     const props = useSpring({\n//         loop: { reverse: true },\n//         from: -1,\n//         to: 1,\n//         config: { duration: 2500 }\n//       });\n//     useFrame(() => {\n//         ref.current.position.y = Math.sin(props)\n//     })\n//     return  <a.mesh\n//         ref={ref}\n//     >\n//         <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n//         <a.meshStandardMaterial roughness={0.5} attach=\"material\" />\n//     </a.mesh>\n//     // return <group ref={ref}>{children}</group>\n// }\n\n\n\n\nfunction AnimationBox({ d, t, children }) {\n    const ref = useRef();\n    // create a common spring that will be used later to interpolate other values\n    const { springXZ } = useSpring({\n      from: { springXZ: -1 },\n      to: { springXZ: 1 },\n      loop: { reverse: true },\n      config: {\n        duration: t / 3 * 2,\n        \n        // friction: 10,\n        // tension: 6,\n        // frequency: 4,\n        // mass: 0\n      }\n    });\n    const { springY } = useSpring({\n        from: { springY: -1 },\n        to: { springY: 1 },\n        loop: { reverse: true },\n        config: {\n          duration: t,\n          \n          // friction: 10,\n          // tension: 6,\n          // frequency: 4,\n          // mass: 0\n        }\n    });\n    // interpolate values from commong spring\n    // const positionXZ = spring.to([0, 1], [-0.1, 0.1]);\n    \n    useFrame(() => {\n      ref.current.position.z = Math.cos(springXZ.get()) * d / 2;\n      ref.current.position.x = Math.sin(springXZ.get()) * d / 2;\n      ref.current.position.y = Math.sin(springY.get()) * d;\n    });\n\n    return (\n      // using a from react-spring will animate our component\n      <a.group ref={ref}>\n        {children}\n      </a.group>\n    );\n  }\n\n// function MainBox(){\n//     const mesh = useRef();\n//     // useFrame(() => (mesh.current.rotation.x = mesh.current.rotation.y += 0.01));\n//     const [expand, setExpand] = useState(false);\n    \n\n//     return (\n//         <a.go  />\n//     );\n// }\n\nconst getLenterns = () => {\n  return <LanternOfGLTF x={Math.floor(Math.random() * 100)} y={Math.floor(Math.random() * 30)} z={Math.floor(Math.random() * 100 - 50)} url=\"./lantern.glb\"/>\n}\n\nfunction Scene() {\n  const [Lenterns, setLenterns] = useState([getLenterns(), getLenterns(), getLenterns()]);\n\n  const addLenterns = useCallback(() => {\n    setLenterns(prev => [...prev, getLenterns()]);\n  }, []);\n\n  useSkybox();\n\n  return (\n    <>\n      <pointLight position={[0, -10, 0]} intensity={1.5} />\n      <Effects />\n      <Suspense fallback={<></>}>\n\n        {/* <Bloom f={3}> */}\n          <AnimationBox  t={3000} d={0.1}>\n          {Lenterns}\n          </AnimationBox>\n          <pointLight position={[0, -4, 10]} intensity={1.5} />\n          {useMemo(() => <MainLentern addLenterns={addLenterns} x={-4} y={-2} z={52} />, [addLenterns])}\n            \n        {/* </Bloom> */}\n      </Suspense>\n    </>\n  )\n}\n\n\nexport default function Main (){\n  return(\n    <div style={{position:'absolute', width: \"100%\", height: \"100%\", zIndex: 100}}>\n      <Canvas\n        translate={true}\n        onCreated={state => state.gl.setClearColor( 0xffffff, 0)}\n        colorManagement\n        shadowMap\n        camera={{ position: [0, 0, 60], fov: 60 }}\n      >\n        <Scene />\n        <Controls />\n        <gridHelper />\n      </Canvas>\n    </div>\n  );    \n};\n\nfunction easeInSine(x) {\n  return 1 - Math.cos((x * Math.PI) / 2);\n}\nfunction easeOutSine(x) {\n  return Math.sin((x * Math.PI) / 2);\n}\nfunction easeInOutSine(x) {\n  return -(Math.cos(Math.PI * x) - 1) / 2;\n}\n\nfunction MainLentern ({ addLenterns, x, y, z }) {\n  const [intensity, setIntensity] = useState(0);\n  const ref = useRef();\n  const closeTimeoutRef = useRef([]);\n\n\n  const checkPoint1 = useSpringRef();\n  const [{ lenternPosition1, cameraPosition1 }, checkPointAPI1] = useSpring(() => ({\n    lenternPosition1: [0, 0, 0],\n    cameraPosition1: [0, 0],\n    ref: checkPoint1,\n  }));\n  const checkPoint2 = useSpringRef();\n  const [{ lenternPosition2, cameraPosition2, cameraLookAt2 }, checkPointAPI2] = useSpring(() => ({\n    lenternPosition2: [0, 0, 0],\n    cameraPosition2: [0, 0],\n    cameraLookAt2: [0],\n    ref: checkPoint2,\n  }));\n  const checkPoint3 = useSpringRef();\n  const [{ lenternPosition3, cameraPosition3, cameraLookAt3 }, checkPointAPI3] = useSpring(() => ({\n    lenternPosition3: [0, 0, 0],\n    cameraPosition3: [0, 0],\n    cameraLookAt3: [0],\n    ref: checkPoint3,\n  }));\n  const checkPoint4 = useSpringRef();\n  const [{ cameraPosition4, cameraLookAt4 }, checkPointAPI4] = useSpring(() => ({\n    cameraPosition4: [0, 0],\n    cameraLookAt4: [0],\n    ref: checkPoint4,\n  }));\n  const checkPoint5 = useSpringRef();\n  const [{ lenternPosition5 }, checkPointAPI5] = useSpring(() => ({\n    lenternPosition5: [0, 0, 0],\n    ref: checkPoint5,\n  }));\n  const checkPoint6 = useSpringRef();\n  const [{ lenternPosition6 }, checkPointAPI6] = useSpring(() => ({\n    lenternPosition6: [0, 0, 0],\n    ref: checkPoint6,\n  }));\n    \n  useFrame((state) => {\n    // x =  y={-2} z={52\n    const [l_x1, l_y1, l_z1] = lenternPosition1.get();\n    const [l_x2, l_y2, l_z2] = lenternPosition2.get();\n    const [l_x3, l_y3, l_z3] = lenternPosition3.get();\n    const [l_x5, l_y5, l_z5] = lenternPosition5.get();\n    const [l_x6, l_y6, l_z6] = lenternPosition6.get();\n    \n    const [c_x1, c_y1] = cameraPosition1.get();\n    const [c_x2, c_y2] = cameraPosition2.get();\n    const [c_x3, c_y3] = cameraPosition3.get();\n    const [c_x4, c_y4] = cameraPosition4.get();\n    \n\n    const [cl_y2] = cameraLookAt2.get();\n    const [cl_y3] = cameraLookAt3.get();\n    const [cl_y4] = cameraLookAt4.get();\n\n    const cameraX = c_x1 + c_x2 + c_x3 + c_x4;\n    const cameraY = c_y1 + c_y2 + c_y3 + c_y4;\n    state.camera.lookAt(new THREE.Vector3(cameraX, cameraY + cl_y2 + cl_y3 + cl_y4, 0));\n    state.camera.position.x = cameraX;\n    state.camera.position.y = cameraY;\n\n    ref.current.position.x = l_x1 + l_x2 + l_x3 + l_x5 + l_x6;\n    ref.current.position.y = l_y1 + l_y2 + l_y3 + l_y5 + l_y6;\n    ref.current.position.z = l_z1 + l_z2 + l_z3 + l_z5 + l_z6;\n  });\n\n  useEffect(() => () => {\n    closeTimeoutRef.current.map(close => close && close.current());\n  }, [])\n\n  const animationStart = async () => {\n    // useChain([checkPoint1, checkPoint2, checkPoint3, checkPoint4, checkPoint5, checkPoint6], [0, 7, 12, 19, 22, 24]);\n\n    checkPointAPI1(() => ({\n      lenternPosition1: [30, 27, -5],\n      cameraPosition1: [20, 23, 0],\n      config: { duration: 7000, easing: easeInSine },\n    }));\n    closeTimeoutRef.current[0] = setTimeout(() => {\n      checkPointAPI2({\n        lenternPosition2: [15, 12, -15],\n        cameraPosition2: [2, 5, 0],\n        cameraLookAt2: [0, 3, 0],\n        config: { duration: 5000 },\n      });\n    }, 7000);\n    closeTimeoutRef.current[1] = setTimeout(() => {\n      checkPointAPI3({\n        lenternPosition3: [19, 14, -20],\n        cameraPosition3: [0, 0, 0],\n        cameraLookAt3: [0, 2, 0],\n        config: { duration: 5000, easing: easeOutSine },\n      });\n    }, 12000);\n    closeTimeoutRef.current[2] = setTimeout(() => {\n      checkPointAPI4({\n        cameraPosition4: [-22, -28, 0],\n        cameraLookAt4: [0, -5, 0],\n        config: { duration: 7000, easing: easeInOutSine },\n      });\n    }, 19000);\n    closeTimeoutRef.current[3] = setTimeout(() => {\n      // x : 30 + 15 + 19 = 64\n      // y : 27 + 12 + 14 = 53\n      // z : -5 + -15 + -20 = 40\n      checkPointAPI5({\n        lenternPosition5: [-64, -58, 30],\n        config: { duration: 1 },\n      });\n    }, 22000);\n    closeTimeoutRef.current[4] = setTimeout(() => {\n      checkPointAPI6({\n        lenternPosition6: [0, 5, 10],\n        config: { duration: 5000, easing: easeInOutSine },\n      });\n    }, 24000);\n    \n    closeTimeoutRef.current[5] = setTimeout(() => {\n      animationReset();\n    }, 30000)\n  }\n\n  const animationReset = async () => {\n    checkPointAPI1(() => ({\n      lenternPosition1: [0, 0, 0],\n      cameraPosition1: [0, 0, 0],\n      config: { duration: 1 },\n    }));\n    checkPointAPI2({\n      lenternPosition2: [0, 0, 0],\n      cameraPosition2: [0, 0, 0],\n      cameraLookAt2: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI3({\n      lenternPosition3: [0, 0, 0],\n      cameraPosition3: [0, 0, 0],\n      cameraLookAt3: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI4({\n      cameraPosition4: [0, 0, 0],\n      cameraLookAt4: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    \n    // x : 30 + 15 + 19 = 64\n    // y : 27 + 12 + 14 = 53\n    // z : -5 + -15 + -20 = 40\n    checkPointAPI5({\n      lenternPosition5: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI6({\n      lenternPosition6: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    addLenterns();\n  }\n\n\n  return (\n    <mesh ref={ref} onClick={() => {\n      setIntensity(intensity + 0.1);\n      animationStart();\n    }}>\n      {/* <pointLight distance={10} position={[ x, y - 2.5, z + 1]} intensity={intensity} /> */}\n      <pointLight distance={10} position={[ x, y + 5, z + 9]} intensity={intensity} />\n      <pointLight position={[ x, y - 2.5, z + 3]} intensity={0.6} />\n      {useMemo(() => <LanternOfGLTF x={x} y={y} z={z} url=\"./lantern.glb\"/>, [x, y, z])}\n    </mesh>\n  )\n}","import React, { useEffect, useMemo } from 'react';\nimport * as THREE from 'three';\nimport { Canvas, useThree } from '@react-three/fiber';\nimport { Html, useProgress, useGLTF } from '@react-three/drei';\n\n// import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'\n// import { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader'\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\n// import { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\n\nimport { EffectComposer, Bloom, /*DepthOfField,*/Noise, Vignette, SelectiveBloom } from '@react-three/postprocessing'\nimport { /*BlurPass, */Resizer, KernelSize } from 'postprocessing'\n\nimport Controls from './Controls';\n\n\nimport Model from './Main'\n\nexport function LanternOfGLTF ({x, y, z, url}) {\n  const {scene} = useGLTF(url);\n  const copiedScene = useMemo(() => scene.clone(), [scene])\n  console.log(copiedScene)\n\n  return copiedScene ? <group position={[x,y,z]} scale={0.005}>\n    <primitive object={copiedScene}/>\n  </group> : null\n}\n\nexport function Loader() {\n  const { progress } = useProgress()\n  return <Html center>{progress} % loaded</Html>\n}\n\nconst path = './Skybox/nightsky_';\nconst images = ['lf', 'rt', 'up', 'dn', 'ft', 'bk'];\nconst ext = '.png';\nconst imagePaths = images.map(img => path + img + ext);\n\nexport const useSkybox = () => {\n  const { scene } = useThree();\n\n  useEffect(() => {\n    const loader = new THREE.CubeTextureLoader()\n    const mat = loader.load(imagePaths)\n    scene.background = mat\n    scene.environment = mat\n  }, [scene])\n\n  return null\n}\n\nexport function SelectiveEffects({lightsRefs, meshRefs}){\n  return (\n    <SelectiveBloom\n      lights={lightsRefs} // ⚠️ REQUIRED! all relevant lights\n      selection={meshRefs} // selection of objects that will have bloom effect\n      selectionLayer={10} // selection layer\n      intensity={1.0} // The bloom intensity.\n      blurPass={undefined} // A blur pass.\n      width={Resizer.AUTO_SIZE} // render width\n      height={Resizer.AUTO_SIZE} // render height\n      kernelSize={KernelSize.LARGE} // blur kernel size\n      luminanceThreshold={0.9} // luminance threshold. Raise this value to mask out darker elements in the scene.\n      luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n    />\n  )\n}\n\n\nexport function Effects() {\n  // const AO = { samples: 3, luminanceInfluence: 0.6, radius: 2, intensity: 5 }\n  return (\n    <EffectComposer>\n      {/* <DepthOfField focusDistance={0} focalLength={0.02} bokehScale={2} height={480} /> */}\n      {/* <Bloom luminanceThreshold={0} luminanceSmoothing={0.9} height={300} /> */}\n      <Bloom\n        intensity={1.0} // The bloom intensity.\n        blurPass={undefined} // A blur pass.\n        width={Resizer.AUTO_SIZE} // render width\n        height={Resizer.AUTO_SIZE} // render height\n        kernelSize={KernelSize.LARGE} // blur kernel size\n        luminanceThreshold={0} // luminance threshold. Raise this value to mask out darker elements in the scene.\n        luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n      />\n      <Noise opacity={0.02} />\n      <Vignette eskil={false} offset={0.1} />\n  </EffectComposer>\n  )\n}\n\nfunction Scene() {\n  useSkybox();\n  return null;\n}\n\nexport default function App (){\n  \n\n  return(\n    <>\n      <Model />\n      <div style={{position:'absolute', width: \"100%\", height: \"100%\"}}>\n        <Canvas\n          translate={true}\n          colorManagement\n          shadowMap\n          camera={{ position: [-5, 3, 6], fov: 60 }}\n        >\n          <Scene />\n          <Controls />\n          <gridHelper />\n        </Canvas>\n      </div>\n    </>\n  );    \n};\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import Main from './Main';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  // <Main />,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}