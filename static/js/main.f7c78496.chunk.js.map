{"version":3,"sources":["Controls.js","utils/socket.js","Main/index.js","App.js","reportWebVitals.js","utils/browserHistory.js","index.js","Camera/index.js"],"names":["Controls","props","useThree","camera","domElement","gl","controls","useRef","useFrame","current","update","ref","args","extend","OrbitControls","Socket","instance","init","io","forceNew","timeout","transports","disconnect","close","AnimationBox","d","t","children","springXZ","useSpring","from","to","loop","reverse","config","duration","springY","position","z","Math","cos","get","x","sin","y","group","getLenterns","LanternOfGLTF","floor","random","url","Scene","useState","Lenterns","setLenterns","addLenterns","useCallback","prev","useSkybox","intensity","Effects","fallback","useMemo","MainLentern","Main","style","width","height","zIndex","translate","onCreated","state","setClearColor","colorManagement","shadowMap","fov","easeInSine","PI","easeOutSine","easeInOutSine","isPlayAnimation","setIsPlayAnimation","setIntensity","closeTimeoutRef","checkPoint1","useSpringRef","lenternPosition1","cameraPosition1","checkPointAPI1","checkPoint2","lenternPosition2","cameraPosition2","cameraLookAt2","checkPointAPI2","checkPoint3","lenternPosition3","cameraPosition3","cameraLookAt3","checkPointAPI3","checkPoint4","cameraPosition4","cameraLookAt4","checkPointAPI4","checkPoint5","lenternPosition5","checkPointAPI5","checkPoint6","lenternPosition6","checkPointAPI6","l_x1","l_y1","l_z1","l_x2","l_y2","l_z2","l_x3","l_y3","l_z3","l_x5","l_y5","l_z5","l_x6","l_y6","l_z6","c_x1","c_y1","c_x2","c_y2","c_x3","c_y3","c_x4","c_y4","cl_y2","cl_y3","cl_y4","cameraX","cameraY","lookAt","THREE","animationReset","a","animationStart","easing","setTimeout","onClick","console","log","useEffect","on","map","distance","scene","useGLTF","copiedScene","clone","scale","object","imagePaths","img","mat","load","background","environment","blurPass","undefined","Resizer","AUTO_SIZE","kernelSize","KernelSize","LARGE","luminanceThreshold","luminanceSmoothing","opacity","eskil","offset","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","basename","process","ReactDOM","render","history","exact","path","component","model","setModel","animationFrameRef","isDetected","setIsDetected","detectionArea","setDetectionArea","video","canvas","webcamInit","navigator","mediaDevices","getUserMedia","audio","facingMode","stream","srcObject","onloadedmetadata","play","renderPredictions","predictions","ctx","getContext","videoWidth","videoHeight","clearRect","font","textBaseline","drawImage","check","strokeStyle","lineWidth","strokeRect","forEach","prediction","bbox","fillStyle","textWidth","measureText","class","textHeight","parseInt","fillRect","rectCollisionDetection","fillText","detectFrame","detect","cancelAnimationFrame","requestAnimationFrame","rect1","rect2","window","innerWidth","innerHeight","textAlign","overflow","display","justifyContent","alignItems","backgroundColor","top","flexDirection","color","onLoadedData","cocoSSD","m","border","marginLeft","type","onChange","e","target","value","document","getElementById"],"mappings":"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","file":"static/js/main.f7c78496.chunk.js","sourcesContent":["import React, { useRef } from 'react';\nimport { extend,  useThree, useFrame } from '@react-three/fiber';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nextend({ OrbitControls });\n\nexport default function Controls(props){\n  const {\n    camera,\n    gl: { domElement },\n  } = useThree();\n  const controls = useRef({});\n\n  useFrame(() => controls.current.update());\n  return (\n    <orbitControls {...props} ref={controls} args={[camera, domElement]} />\n  );\n};\n","// ES6 import or TypeScript\nimport io from \"socket.io-client\";\n\nexport default class Socket {\n  static instance = null;\n  static init = () => {\n    Socket.instance = io(\"https://interactive-art-t2-server.herokuapp.com\", {\n      forceNew: true,\n      timeout: 5000,\n      transports: [\"websocket\"],\n    });\n  };\n  static disconnect = () => Socket.instance?.close();\n}\n","import React, {\n  Suspense,\n  useRef,\n  useState,\n  useMemo,\n  useEffect,\n  useCallback,\n} from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas, useFrame, useLoader } from \"@react-three/fiber\";\n// import { Stars } from '@react-three/drei';\nimport { TextureLoader } from \"three/src/loaders/TextureLoader.js\";\n\nimport Controls from \"../Controls\";\n\nimport { useSpring, a, useSpringRef } from \"@react-spring/three\";\n\nimport { LanternOfGLTF, Effects, useSkybox } from \"../App\";\n\nimport Socket from \"../utils/socket\";\n\nexport const Background = () => {\n  const texture = useLoader(TextureLoader, \"./background.jpg\");\n\n  return (\n    <mesh>\n      <planeGeometry attach=\"geometry\" args={[1440 / 10, 718 / 10]} />\n      {texture && <meshBasicMaterial attach=\"material\" map={texture} />}\n    </mesh>\n  );\n};\n\n// function FloatingBox() {\n//     const ref = useRef()\n//     // const props = useSpring({\n//     //     position: expand ? [1.4, 1.4, 1.4] : [1, 1, 1],\n//     // });\n//     const props = useSpring({\n//         loop: { reverse: true },\n//         from: -1,\n//         to: 1,\n//         config: { duration: 2500 }\n//       });\n//     useFrame(() => {\n//         ref.current.position.y = Math.sin(props)\n//     })\n//     return  <a.mesh\n//         ref={ref}\n//     >\n//         <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n//         <a.meshStandardMaterial roughness={0.5} attach=\"material\" />\n//     </a.mesh>\n//     // return <group ref={ref}>{children}</group>\n// }\n\nfunction AnimationBox({ d, t, children }) {\n  const ref = useRef();\n  // create a common spring that will be used later to interpolate other values\n  const { springXZ } = useSpring({\n    from: { springXZ: -1 },\n    to: { springXZ: 1 },\n    loop: { reverse: true },\n    config: {\n      duration: (t / 3) * 2,\n\n      // friction: 10,\n      // tension: 6,\n      // frequency: 4,\n      // mass: 0\n    },\n  });\n  const { springY } = useSpring({\n    from: { springY: -1 },\n    to: { springY: 1 },\n    loop: { reverse: true },\n    config: {\n      duration: t,\n\n      // friction: 10,\n      // tension: 6,\n      // frequency: 4,\n      // mass: 0\n    },\n  });\n  // interpolate values from commong spring\n  // const positionXZ = spring.to([0, 1], [-0.1, 0.1]);\n\n  useFrame(() => {\n    ref.current.position.z = (Math.cos(springXZ.get()) * d) / 2;\n    ref.current.position.x = (Math.sin(springXZ.get()) * d) / 2;\n    ref.current.position.y = Math.sin(springY.get()) * d;\n  });\n\n  return (\n    // using a from react-spring will animate our component\n    <a.group ref={ref}>{children}</a.group>\n  );\n}\n\n// function MainBox(){\n//     const mesh = useRef();\n//     // useFrame(() => (mesh.current.rotation.x = mesh.current.rotation.y += 0.01));\n//     const [expand, setExpand] = useState(false);\n\n//     return (\n//         <a.go  />\n//     );\n// }\n\nconst getLenterns = () => {\n  return (\n    <LanternOfGLTF\n      x={Math.floor(Math.random() * 100)}\n      y={Math.floor(Math.random() * 30)}\n      z={Math.floor(Math.random() * 100 - 50)}\n      url=\"./lantern.glb\"\n    />\n  );\n};\n\nfunction Scene() {\n  const [Lenterns, setLenterns] = useState([\n    getLenterns(),\n    getLenterns(),\n    getLenterns(),\n  ]);\n\n  const addLenterns = useCallback(() => {\n    setLenterns((prev) => [...prev, getLenterns()]);\n  }, []);\n\n  useSkybox();\n\n  return (\n    <>\n      <pointLight position={[0, -10, 0]} intensity={1.5} />\n      <Effects />\n      <Suspense fallback={<></>}>\n        {/* <Bloom f={3}> */}\n        <AnimationBox t={3000} d={0.1}>\n          {Lenterns}\n        </AnimationBox>\n        <pointLight position={[0, -4, 10]} intensity={1.5} />\n        {useMemo(\n          () => (\n            <MainLentern addLenterns={addLenterns} x={-4} y={-2} z={52} />\n          ),\n          [addLenterns]\n        )}\n\n        {/* </Bloom> */}\n      </Suspense>\n    </>\n  );\n}\n\nexport default function Main() {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: 100,\n      }}\n    >\n      <Canvas\n        translate={true}\n        onCreated={(state) => state.gl.setClearColor(0xffffff, 0)}\n        colorManagement\n        shadowMap\n        camera={{ position: [0, 0, 60], fov: 60 }}\n      >\n        <Scene />\n        <Controls />\n        <gridHelper />\n      </Canvas>\n    </div>\n  );\n}\n\nfunction easeInSine(x) {\n  return 1 - Math.cos((x * Math.PI) / 2);\n}\nfunction easeOutSine(x) {\n  return Math.sin((x * Math.PI) / 2);\n}\nfunction easeInOutSine(x) {\n  return -(Math.cos(Math.PI * x) - 1) / 2;\n}\n\nfunction MainLentern({ addLenterns, x, y, z }) {\n  const [isPlayAnimation, setIsPlayAnimation] = useState(false);\n  const [intensity, setIntensity] = useState(0);\n  const ref = useRef();\n  const closeTimeoutRef = useRef([]);\n\n  const checkPoint1 = useSpringRef();\n  const [{ lenternPosition1, cameraPosition1 }, checkPointAPI1] = useSpring(\n    () => ({\n      lenternPosition1: [0, 0, 0],\n      cameraPosition1: [0, 0],\n      ref: checkPoint1,\n    })\n  );\n  const checkPoint2 = useSpringRef();\n  const [{ lenternPosition2, cameraPosition2, cameraLookAt2 }, checkPointAPI2] =\n    useSpring(() => ({\n      lenternPosition2: [0, 0, 0],\n      cameraPosition2: [0, 0],\n      cameraLookAt2: [0],\n      ref: checkPoint2,\n    }));\n  const checkPoint3 = useSpringRef();\n  const [{ lenternPosition3, cameraPosition3, cameraLookAt3 }, checkPointAPI3] =\n    useSpring(() => ({\n      lenternPosition3: [0, 0, 0],\n      cameraPosition3: [0, 0],\n      cameraLookAt3: [0],\n      ref: checkPoint3,\n    }));\n  const checkPoint4 = useSpringRef();\n  const [{ cameraPosition4, cameraLookAt4 }, checkPointAPI4] = useSpring(\n    () => ({\n      cameraPosition4: [0, 0],\n      cameraLookAt4: [0],\n      ref: checkPoint4,\n    })\n  );\n  const checkPoint5 = useSpringRef();\n  const [{ lenternPosition5 }, checkPointAPI5] = useSpring(() => ({\n    lenternPosition5: [0, 0, 0],\n    ref: checkPoint5,\n  }));\n  const checkPoint6 = useSpringRef();\n  const [{ lenternPosition6 }, checkPointAPI6] = useSpring(() => ({\n    lenternPosition6: [0, 0, 0],\n    ref: checkPoint6,\n  }));\n\n  useFrame((state) => {\n    // x =  y={-2} z={52\n    const [l_x1, l_y1, l_z1] = lenternPosition1.get();\n    const [l_x2, l_y2, l_z2] = lenternPosition2.get();\n    const [l_x3, l_y3, l_z3] = lenternPosition3.get();\n    const [l_x5, l_y5, l_z5] = lenternPosition5.get();\n    const [l_x6, l_y6, l_z6] = lenternPosition6.get();\n\n    const [c_x1, c_y1] = cameraPosition1.get();\n    const [c_x2, c_y2] = cameraPosition2.get();\n    const [c_x3, c_y3] = cameraPosition3.get();\n    const [c_x4, c_y4] = cameraPosition4.get();\n\n    const [cl_y2] = cameraLookAt2.get();\n    const [cl_y3] = cameraLookAt3.get();\n    const [cl_y4] = cameraLookAt4.get();\n\n    const cameraX = c_x1 + c_x2 + c_x3 + c_x4;\n    const cameraY = c_y1 + c_y2 + c_y3 + c_y4;\n    state.camera.lookAt(\n      new THREE.Vector3(cameraX, cameraY + cl_y2 + cl_y3 + cl_y4, 0)\n    );\n    state.camera.position.x = cameraX;\n    state.camera.position.y = cameraY;\n\n    ref.current.position.x = l_x1 + l_x2 + l_x3 + l_x5 + l_x6;\n    ref.current.position.y = l_y1 + l_y2 + l_y3 + l_y5 + l_y6;\n    ref.current.position.z = l_z1 + l_z2 + l_z3 + l_z5 + l_z6;\n  });\n\n  const animationReset = useCallback(async () => {\n    checkPointAPI1(() => ({\n      lenternPosition1: [0, 0, 0],\n      cameraPosition1: [0, 0, 0],\n      config: { duration: 1 },\n    }));\n    checkPointAPI2({\n      lenternPosition2: [0, 0, 0],\n      cameraPosition2: [0, 0, 0],\n      cameraLookAt2: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI3({\n      lenternPosition3: [0, 0, 0],\n      cameraPosition3: [0, 0, 0],\n      cameraLookAt3: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI4({\n      cameraPosition4: [0, 0, 0],\n      cameraLookAt4: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    // x : 30 + 15 + 19 = 64\n    // y : 27 + 12 + 14 = 53\n    // z : -5 + -15 + -20 = 40\n    checkPointAPI5({\n      lenternPosition5: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    checkPointAPI6({\n      lenternPosition6: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    addLenterns();\n    setIsPlayAnimation(false);\n    setIntensity(0);\n  }, [\n    addLenterns,\n    checkPointAPI1,\n    checkPointAPI2,\n    checkPointAPI3,\n    checkPointAPI4,\n    checkPointAPI5,\n    checkPointAPI6,\n  ]);\n\n  const animationStart = useCallback(async () => {\n    // useChain([checkPoint1, checkPoint2, checkPoint3, checkPoint4, checkPoint5, checkPoint6], [0, 7, 12, 19, 22, 24]);\n\n    checkPointAPI1(() => ({\n      lenternPosition1: [30, 27, -5],\n      cameraPosition1: [20, 23, 0],\n      config: { duration: 7000, easing: easeInSine },\n    }));\n    closeTimeoutRef.current[0] = setTimeout(() => {\n      checkPointAPI2({\n        lenternPosition2: [15, 12, -15],\n        cameraPosition2: [2, 5, 0],\n        cameraLookAt2: [0, 3, 0],\n        config: { duration: 5000 },\n      });\n    }, 7000);\n    closeTimeoutRef.current[1] = setTimeout(() => {\n      checkPointAPI3({\n        lenternPosition3: [19, 14, -20],\n        cameraPosition3: [0, 0, 0],\n        cameraLookAt3: [0, 2, 0],\n        config: { duration: 5000, easing: easeOutSine },\n      });\n    }, 12000);\n    closeTimeoutRef.current[2] = setTimeout(() => {\n      checkPointAPI4({\n        cameraPosition4: [-22, -28, 0],\n        cameraLookAt4: [0, -5, 0],\n        config: { duration: 7000, easing: easeInOutSine },\n      });\n    }, 19000);\n    closeTimeoutRef.current[3] = setTimeout(() => {\n      // x : 30 + 15 + 19 = 64\n      // y : 27 + 12 + 14 = 53\n      // z : -5 + -15 + -20 = 40\n      checkPointAPI5({\n        lenternPosition5: [-64, -58, 30],\n        config: { duration: 1 },\n      });\n    }, 22000);\n    closeTimeoutRef.current[4] = setTimeout(() => {\n      checkPointAPI6({\n        lenternPosition6: [0, 5, 10],\n        config: { duration: 5000, easing: easeInOutSine },\n      });\n    }, 24000);\n\n    closeTimeoutRef.current[5] = setTimeout(() => {\n      animationReset();\n    }, 30000);\n  }, [\n    animationReset,\n    checkPointAPI1,\n    checkPointAPI2,\n    checkPointAPI3,\n    checkPointAPI4,\n    checkPointAPI5,\n    checkPointAPI6,\n  ]);\n\n  const onClick = useCallback(() => {\n    console.log(\"onClick\", isPlayAnimation);\n    if (!isPlayAnimation) {\n      console.log(\"!!!animationStart!!!\");\n      animationStart();\n      setIsPlayAnimation(true);\n    }\n  }, [animationStart, isPlayAnimation]);\n  // setIntensity(intensity + 0.1);\n\n  useEffect(() => {\n    console.log(\"useEffect\", Socket.instance);\n    Socket.instance?.on(\"upIntensity\", () => {\n      console.log(\"upIntensity\");\n      setIntensity((prev) => prev + 1);\n    });\n    Socket.instance?.on(\"animationStart\", () => {\n      console.log(\"animationStart\");\n      onClick();\n    });\n  }, [onClick]);\n\n  useEffect(\n    () => () => {\n      closeTimeoutRef.current.map((close) => close && close.current());\n    },\n    []\n  );\n\n  return (\n    <mesh ref={ref} onClick={onClick}>\n      {/* <pointLight distance={10} position={[ x, y - 2.5, z + 1]} intensity={intensity} /> */}\n      <pointLight\n        distance={10}\n        position={[x, y + 5, z + 9]}\n        intensity={intensity}\n      />\n      <pointLight position={[x, y - 2.5, z + 3]} intensity={0.6} />\n      {useMemo(\n        () => (\n          <LanternOfGLTF x={x} y={y} z={z} url=\"./lantern.glb\" />\n        ),\n        [x, y, z]\n      )}\n    </mesh>\n  );\n}\n","import React, { useEffect, useMemo } from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas, useThree } from \"@react-three/fiber\";\nimport { Html, useProgress, useGLTF } from \"@react-three/drei\";\n\n// import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'\n// import { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader'\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\n// import { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\n\nimport {\n  EffectComposer,\n  Bloom,\n  /*DepthOfField,*/ Noise,\n  Vignette,\n  SelectiveBloom,\n} from \"@react-three/postprocessing\";\nimport { /*BlurPass, */ Resizer, KernelSize } from \"postprocessing\";\n\nimport Controls from \"./Controls\";\n\nimport Model from \"./Main\";\n\nexport function LanternOfGLTF({ x, y, z, url }) {\n  const { scene } = useGLTF(url);\n  const copiedScene = useMemo(() => scene.clone(), [scene]);\n  console.log(copiedScene);\n\n  return copiedScene ? (\n    <group position={[x, y, z]} scale={0.005}>\n      <primitive object={copiedScene} />\n    </group>\n  ) : null;\n}\n\nexport function Loader() {\n  const { progress } = useProgress();\n  return <Html center>{progress} % loaded</Html>;\n}\n\nconst path = \"./Skybox/nightsky_\";\nconst images = [\"lf\", \"rt\", \"up\", \"dn\", \"ft\", \"bk\"];\nconst ext = \".png\";\nconst imagePaths = images.map((img) => path + img + ext);\n\nexport const useSkybox = () => {\n  const { scene } = useThree();\n\n  useEffect(() => {\n    const loader = new THREE.CubeTextureLoader();\n    const mat = loader.load(imagePaths);\n    scene.background = mat;\n    scene.environment = mat;\n  }, [scene]);\n\n  return null;\n};\n\nexport function SelectiveEffects({ lightsRefs, meshRefs }) {\n  return (\n    <SelectiveBloom\n      lights={lightsRefs} // ⚠️ REQUIRED! all relevant lights\n      selection={meshRefs} // selection of objects that will have bloom effect\n      selectionLayer={10} // selection layer\n      intensity={1.0} // The bloom intensity.\n      blurPass={undefined} // A blur pass.\n      width={Resizer.AUTO_SIZE} // render width\n      height={Resizer.AUTO_SIZE} // render height\n      kernelSize={KernelSize.LARGE} // blur kernel size\n      luminanceThreshold={0.9} // luminance threshold. Raise this value to mask out darker elements in the scene.\n      luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n    />\n  );\n}\n\nexport function Effects() {\n  // const AO = { samples: 3, luminanceInfluence: 0.6, radius: 2, intensity: 5 }\n  return (\n    <EffectComposer>\n      {/* <DepthOfField focusDistance={0} focalLength={0.02} bokehScale={2} height={480} /> */}\n      {/* <Bloom luminanceThreshold={0} luminanceSmoothing={0.9} height={300} /> */}\n      <Bloom\n        intensity={1.0} // The bloom intensity.\n        blurPass={undefined} // A blur pass.\n        width={Resizer.AUTO_SIZE} // render width\n        height={Resizer.AUTO_SIZE} // render height\n        kernelSize={KernelSize.LARGE} // blur kernel size\n        luminanceThreshold={0} // luminance threshold. Raise this value to mask out darker elements in the scene.\n        luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n      />\n      <Noise opacity={0.02} />\n      <Vignette eskil={false} offset={0.1} />\n    </EffectComposer>\n  );\n}\n\nfunction Scene() {\n  useSkybox();\n  return null;\n}\n\nexport default function App() {\n  return (\n    <>\n      <Model />\n      <div style={{ position: \"absolute\", width: \"100%\", height: \"100%\" }}>\n        <Canvas\n          translate={true}\n          colorManagement\n          shadowMap\n          camera={{ position: [-5, 3, 6], fov: 60 }}\n        >\n          <Scene />\n          <Controls />\n          <gridHelper />\n        </Canvas>\n      </div>\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createBrowserHistory } from \"history\";\n\nexport default createBrowserHistory({\n  basename: process.env.PUBLIC_URL,\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Camera from \"./Camera\";\n\nimport Main from \"./Main\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { Router, Switch, Route } from \"react-router-dom\";\n\nimport Socket from \"./utils/socket\";\nimport history from \"./utils/browserHistory\";\n\nSocket.init();\n\nReactDOM.render(\n  <Router history={history}>\n    <Switch>\n      <Route exact path=\"/\" component={App} />\n      <Route exact path=\"/main\" component={Main} />\n      <Route exact path=\"/camera\" component={Camera} />\n    </Switch>\n  </Router>,\n  // <Main />,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\n\nimport \"@tensorflow/tfjs-backend-cpu\";\nimport \"@tensorflow/tfjs-backend-webgl\";\nimport \"@tensorflow/tfjs\";\nimport * as cocoSSD from \"@tensorflow-models/coco-ssd\";\n\nexport default function Camera() {\n  const [model, setModel] = useState(null);\n  const animationFrameRef = useRef(null);\n  const [isDetected, setIsDetected] = useState(false);\n  const [detectionArea, setDetectionArea] = useState({\n    x: 300,\n    y: 300,\n    width: 50,\n    height: 50,\n  });\n  const video = useRef(null);\n  const canvas = useRef(null);\n\n  const webcamInit = useCallback(() => {\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: false,\n        video: { facingMode: \"user\" },\n      })\n      .then((stream) => {\n        video.current.srcObject = stream;\n        video.current.onloadedmetadata = () => {\n          video.current.play();\n        };\n      });\n  }, []);\n\n  const renderPredictions = useCallback(\n    (predictions) => {\n      const ctx = canvas.current.getContext(\"2d\");\n      canvas.current.width = video.current.videoWidth;\n      canvas.current.height = video.current.videoHeight;\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n      // Fonts\n      const font = \"16px sans-serif\";\n      ctx.font = font;\n      ctx.textBaseline = \"top\";\n      ctx.drawImage(\n        video.current,\n        0,\n        0,\n        video.current.videoWidth,\n        video.current.videoHeight\n      );\n\n      let check = false;\n\n      ctx.strokeStyle = \"green\";\n      ctx.lineWidth = 3;\n      // Draw the bounding\n      ctx.strokeRect(\n        detectionArea.x,\n        detectionArea.y,\n        detectionArea.width,\n        detectionArea.height\n      );\n\n      predictions.forEach((prediction) => {\n        // Bounding boxes's coordinates and sizes\n        const x = prediction.bbox[0];\n        const y = prediction.bbox[1];\n        const width = prediction.bbox[2];\n        const height = prediction.bbox[3];\n        // Bounding box style\n        ctx.strokeStyle = \"#00FFFF\";\n        ctx.lineWidth = 2;\n        // Draw the bounding\n        ctx.strokeRect(x, y, width, height);\n\n        // Label background\n        ctx.fillStyle = \"#00FFFF\";\n        const textWidth = ctx.measureText(prediction.class).width;\n        const textHeight = parseInt(font, 10); // base 10\n        ctx.fillRect(x, y, textWidth + 4, textHeight + 4);\n\n        if (prediction.class === \"person\") {\n          const res = rectCollisionDetection(\n            {\n              x,\n              y,\n              width,\n              height,\n            },\n            detectionArea\n          );\n\n          if (res) check = true;\n        }\n      });\n\n      setIsDetected(check);\n\n      predictions.forEach((prediction) => {\n        // Write prediction class names\n        const x = prediction.bbox[0];\n        const y = prediction.bbox[1];\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(prediction.class, x, y);\n      });\n    },\n    [detectionArea]\n  );\n\n  const detectFrame = useCallback(\n    (video, model) => {\n      model.detect(video).then((predictions) => {\n        renderPredictions(predictions);\n        animationFrameRef.current &&\n          cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = requestAnimationFrame(() => {\n          detectFrame(video, model);\n        });\n      });\n    },\n    [renderPredictions]\n  );\n\n  const rectCollisionDetection = (rect1, rect2) => {\n    if (\n      rect1.x < rect2.x + rect2.width &&\n      rect1.x + rect1.width > rect2.x &&\n      rect1.y < rect2.y + rect2.height &&\n      rect1.y + rect1.height > rect2.y\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    if (model) {\n      detectFrame(video.current, model);\n    }\n  }, [model, detectFrame]);\n\n  useEffect(() => {\n    webcamInit();\n  }, [webcamInit]);\n\n  return (\n    <div\n      style={{\n        width: window.innerWidth,\n        height: window.innerHeight,\n        textAlign: \"center\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        backgroundColor: \"#333\",\n      }}\n    >\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          backgroundColor: \"rgba(0, 0, 0, 0.3)\",\n        }}\n      >\n        <h1 style={{ color: \"#fff\" }}>사람 인식</h1>\n        <p style={{ color: \"#fff\" }}>초록 범위에 사람이 들어오면 알 수 있음!</p>\n      </div>\n      <video\n        style={{ display: \"none\" }}\n        onLoadedData={async () => {\n          const m = await cocoSSD.load({});\n          setModel(m);\n        }}\n        ref={(ref) => (video.current = ref)}\n      />\n\n      <canvas\n        style={{ border: isDetected ? \"5px solid red\" : \"5px solid #fff\" }}\n        ref={(ref) => (canvas.current = ref)}\n      />\n      <div style={{ color: \"#fff\", marginLeft: \"16px\" }}>\n        <div>\n          x :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, x: e.target.value }))\n            }\n            value={detectionArea.x}\n          />\n        </div>\n        <div>\n          y :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, y: e.target.value }))\n            }\n            value={detectionArea.y}\n          />\n        </div>\n        <div>\n          w :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, width: e.target.value }))\n            }\n            value={detectionArea.width}\n          />\n        </div>\n        <div>\n          h :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, height: e.target.value }))\n            }\n            value={detectionArea.height}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}