(this["webpackJsonpinteractive-art-t2"]=this["webpackJsonpinteractive-art-t2"]||[]).push([[0],{375:function(e,t,n){},408:function(e,t){},409:function(e,t){},417:function(e,t){},420:function(e,t){},421:function(e,t){},432:function(e,t,n){"use strict";n.r(t);var i=n(16),r=n(176),c=n.n(r),o=(n(375),n(2)),a=n(51),s=n(438),u=(n(436),n(437),n(177)),j=n(42),l=n(35),b=n(314),f=n(34);function O(e){var t=Object(a.g)(),n=t.camera,r=t.gl.domElement,c=Object(i.useRef)({});return Object(a.e)((function(){return c.current.update()})),Object(f.jsx)("orbitControls",Object(l.a)(Object(l.a)({},e),{},{ref:c,args:[n,r]}))}Object(a.d)({OrbitControls:b.a});var d=n(8),g=n.n(d),h=n(14),p=n(23),x=n(6),m=(n(371),n(75)),v=n(1),y=n(317),k=n.n(y),P=function e(){Object(v.a)(this,e)};P.instance=null,P.init=function(){P.instance=k()("https://interactive-art-t2-server.herokuapp.com",{forceNew:!0,timeout:5e3,transports:["websocket"]})},P.disconnect=function(){var e;return null===(e=P.instance)||void 0===e?void 0:e.close()};function w(e){var t=e.d,n=e.t,r=e.children,c=Object(i.useRef)(),o=Object(m.useSpring)({from:{springXZ:-1},to:{springXZ:1},loop:{reverse:!0},config:{duration:n/3*2}}).springXZ,s=Object(m.useSpring)({from:{springY:-1},to:{springY:1},loop:{reverse:!0},config:{duration:n}}).springY;return Object(a.e)((function(){c.current.position.z=Math.cos(o.get())*t/2,c.current.position.x=Math.sin(o.get())*t/2,c.current.position.y=Math.sin(s.get())*t})),Object(f.jsx)(m.a.group,{ref:c,children:r})}var S=function(){return Object(f.jsx)(T,{x:Math.floor(100*Math.random()),y:Math.floor(30*Math.random()),z:Math.floor(100*Math.random()-50),url:"./lantern.glb"})};function C(){var e=Object(i.useState)([S(),S(),S()]),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(i.useCallback)((function(){r((function(e){return[].concat(Object(p.a)(e),[S()])}))}),[]);return I(),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("pointLight",{position:[0,-10,0],intensity:1.5}),Object(f.jsx)(z,{}),Object(f.jsxs)(i.Suspense,{fallback:Object(f.jsx)(f.Fragment,{}),children:[Object(f.jsx)(w,{t:3e3,d:.1,children:n}),Object(f.jsx)("pointLight",{position:[0,-4,10],intensity:1.5}),Object(i.useMemo)((function(){return Object(f.jsx)(F,{addLenterns:c,x:-4,y:-2,z:52})}),[c])]})]})}function L(){return Object(f.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:100},children:Object(f.jsxs)(a.a,{translate:!0,onCreated:function(e){return e.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,60],fov:60},children:[Object(f.jsx)(C,{}),Object(f.jsx)(O,{}),Object(f.jsx)("gridHelper",{})]})})}function M(e){return 1-Math.cos(e*Math.PI/2)}function A(e){return Math.sin(e*Math.PI/2)}function R(e){return-(Math.cos(Math.PI*e)-1)/2}function F(e){var t=e.addLenterns,n=e.x,r=e.y,c=e.z,s=Object(i.useState)(!1),u=Object(x.a)(s,2),j=u[0],l=u[1],b=Object(i.useState)(0),O=Object(x.a)(b,2),d=O[0],p=O[1],v=Object(i.useRef)(),y=Object(i.useRef)([]),k=Object(m.useSpringRef)(),w=Object(m.useSpring)((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0],ref:k}})),S=Object(x.a)(w,2),C=S[0],L=C.lenternPosition1,F=C.cameraPosition1,E=S[1],I=Object(m.useSpringRef)(),z=Object(m.useSpring)((function(){return{lenternPosition2:[0,0,0],cameraPosition2:[0,0],cameraLookAt2:[0],ref:I}})),H=Object(x.a)(z,2),W=H[0],Z=W.lenternPosition2,D=W.cameraPosition2,B=W.cameraLookAt2,U=H[1],X=Object(m.useSpringRef)(),Y=Object(m.useSpring)((function(){return{lenternPosition3:[0,0,0],cameraPosition3:[0,0],cameraLookAt3:[0],ref:X}})),_=Object(x.a)(Y,2),J=_[0],q=J.lenternPosition3,G=J.cameraPosition3,N=J.cameraLookAt3,V=_[1],K=Object(m.useSpringRef)(),Q=Object(m.useSpring)((function(){return{cameraPosition4:[0,0],cameraLookAt4:[0],ref:K}})),$=Object(x.a)(Q,2),ee=$[0],te=ee.cameraPosition4,ne=ee.cameraLookAt4,ie=$[1],re=Object(m.useSpringRef)(),ce=Object(m.useSpring)((function(){return{lenternPosition5:[0,0,0],ref:re}})),oe=Object(x.a)(ce,2),ae=oe[0].lenternPosition5,se=oe[1],ue=Object(m.useSpringRef)(),je=Object(m.useSpring)((function(){return{lenternPosition6:[0,0,0],ref:ue}})),le=Object(x.a)(je,2),be=le[0].lenternPosition6,fe=le[1];Object(a.e)((function(e){var t=L.get(),n=Object(x.a)(t,3),i=n[0],r=n[1],c=n[2],a=Z.get(),s=Object(x.a)(a,3),u=s[0],j=s[1],l=s[2],b=q.get(),f=Object(x.a)(b,3),O=f[0],d=f[1],g=f[2],h=ae.get(),p=Object(x.a)(h,3),m=p[0],y=p[1],k=p[2],P=be.get(),w=Object(x.a)(P,3),S=w[0],C=w[1],M=w[2],A=F.get(),R=Object(x.a)(A,2),T=R[0],E=R[1],I=D.get(),z=Object(x.a)(I,2),H=z[0],W=z[1],U=G.get(),X=Object(x.a)(U,2),Y=X[0],_=X[1],J=te.get(),V=Object(x.a)(J,2),K=V[0],Q=V[1],$=B.get(),ee=Object(x.a)($,1)[0],ie=N.get(),re=Object(x.a)(ie,1)[0],ce=ne.get(),oe=Object(x.a)(ce,1)[0],se=T+H+Y+K,ue=E+W+_+Q;e.camera.lookAt(new o.Vector3(se,ue+ee+re+oe,0)),e.camera.position.x=se,e.camera.position.y=ue,v.current.position.x=i+u+O+m+S,v.current.position.y=r+j+d+y+C,v.current.position.z=c+l+g+k+M}));var Oe=Object(i.useCallback)(Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0,0],config:{duration:1}}})),U({lenternPosition2:[0,0,0],cameraPosition2:[0,0,0],cameraLookAt2:[0,0,0],config:{duration:1}}),V({lenternPosition3:[0,0,0],cameraPosition3:[0,0,0],cameraLookAt3:[0,0,0],config:{duration:1}}),ie({cameraPosition4:[0,0,0],cameraLookAt4:[0,0,0],config:{duration:1}}),se({lenternPosition5:[0,0,0],config:{duration:1}}),fe({lenternPosition6:[0,0,0],config:{duration:1}}),t(),l(!1),p(0);case 9:case"end":return e.stop()}}),e)}))),[t,E,U,V,ie,se,fe]),de=Object(i.useCallback)(Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E((function(){return{lenternPosition1:[30,27,-5],cameraPosition1:[20,23,0],config:{duration:7e3,easing:M}}})),y.current[0]=setTimeout((function(){U({lenternPosition2:[15,12,-15],cameraPosition2:[2,5,0],cameraLookAt2:[0,3,0],config:{duration:5e3}})}),7e3),y.current[1]=setTimeout((function(){V({lenternPosition3:[19,14,-20],cameraPosition3:[0,0,0],cameraLookAt3:[0,2,0],config:{duration:5e3,easing:A}})}),12e3),y.current[2]=setTimeout((function(){ie({cameraPosition4:[-22,-28,0],cameraLookAt4:[0,-5,0],config:{duration:7e3,easing:R}})}),19e3),y.current[3]=setTimeout((function(){se({lenternPosition5:[-64,-58,30],config:{duration:1}})}),22e3),y.current[4]=setTimeout((function(){fe({lenternPosition6:[0,5,10],config:{duration:5e3,easing:R}})}),24e3),y.current[5]=setTimeout((function(){Oe()}),3e4);case 7:case"end":return e.stop()}}),e)}))),[Oe,E,U,V,ie,se,fe]),ge=Object(i.useCallback)((function(){console.log("onClick",j),j||(console.log("!!!animationStart!!!"),de(),l(!0))}),[de,j]);return Object(i.useEffect)((function(){var e,t;console.log("useEffect",P.instance),null===(e=P.instance)||void 0===e||e.on("upIntensity",(function(){console.log("upIntensity"),p((function(e){return e+1}))})),null===(t=P.instance)||void 0===t||t.on("animationStart",(function(){console.log("animationStart"),ge()}))}),[ge]),Object(i.useEffect)((function(){return function(){y.current.map((function(e){return e&&e.current()}))}}),[]),Object(f.jsxs)("mesh",{ref:v,onClick:ge,children:[Object(f.jsx)("pointLight",{distance:10,position:[n,r+5,c+9],intensity:d}),Object(f.jsx)("pointLight",{position:[n,r-2.5,c+3],intensity:.6}),Object(i.useMemo)((function(){return Object(f.jsx)(T,{x:n,y:r,z:c,url:"./lantern.glb"})}),[n,r,c])]})}function T(e){var t=e.x,n=e.y,r=e.z,c=e.url,o=Object(s.a)(c).scene,a=Object(i.useMemo)((function(){return o.clone()}),[o]);return console.log(a),a?Object(f.jsx)("group",{position:[t,n,r],scale:.005,children:Object(f.jsx)("primitive",{object:a})}):null}var E=["lf","rt","up","dn","ft","bk"].map((function(e){return"./Skybox/nightsky_"+e+".png"})),I=function(){var e=Object(a.g)().scene;return Object(i.useEffect)((function(){var t=(new o.CubeTextureLoader).load(E);e.background=t,e.environment=t}),[e]),null};function z(){return Object(f.jsxs)(u.b,{children:[Object(f.jsx)(u.a,{intensity:1,blurPass:void 0,width:j.y.AUTO_SIZE,height:j.y.AUTO_SIZE,kernelSize:j.r.LARGE,luminanceThreshold:0,luminanceSmoothing:.025}),Object(f.jsx)(u.c,{opacity:.02}),Object(f.jsx)(u.e,{eskil:!1,offset:.1})]})}function H(){return I(),null}n(233),n(232),n(431);var W=n(369);var Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,440)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),r(e),c(e),o(e)}))},D=n(439),B=n(117),U=Object(B.a)({basename:"/interactive-art-t2"});P.init(),c.a.render(Object(f.jsx)(D.b,{history:U,children:Object(f.jsxs)(D.c,{children:[Object(f.jsx)(D.a,{exact:!0,path:"/",component:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L,{}),Object(f.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:Object(f.jsxs)(a.a,{translate:!0,colorManagement:!0,shadowMap:!0,camera:{position:[-5,3,6],fov:60},children:[Object(f.jsx)(H,{}),Object(f.jsx)(O,{}),Object(f.jsx)("gridHelper",{})]})})]})}}),Object(f.jsx)(D.a,{exact:!0,path:"/main",component:L}),Object(f.jsx)(D.a,{exact:!0,path:"/camera",component:function(){var e=Object(i.useState)(null),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(i.useRef)(null),o=Object(i.useState)(!1),a=Object(x.a)(o,2),s=a[0],u=a[1],j=Object(i.useState)({x:300,y:300,width:50,height:50}),b=Object(x.a)(j,2),O=b[0],d=b[1],p=Object(i.useRef)(null),m=Object(i.useRef)(null),v=Object(i.useCallback)((function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then((function(e){p.current.srcObject=e,p.current.onloadedmetadata=function(){p.current.play()}}))}),[]),y=Object(i.useCallback)((function(e){var t=m.current.getContext("2d");m.current.width=p.current.videoWidth,m.current.height=p.current.videoHeight,t.clearRect(0,0,t.canvas.width,t.canvas.height);var n="16px sans-serif";t.font=n,t.textBaseline="top",t.drawImage(p.current,0,0,p.current.videoWidth,p.current.videoHeight);var i=!1;t.strokeStyle="green",t.lineWidth=3,t.strokeRect(O.x,O.y,O.width,O.height),e.forEach((function(e){var r=e.bbox[0],c=e.bbox[1],o=e.bbox[2],a=e.bbox[3];t.strokeStyle="#00FFFF",t.lineWidth=2,t.strokeRect(r,c,o,a),t.fillStyle="#00FFFF";var s=t.measureText(e.class).width,u=parseInt(n,10);(t.fillRect(r,c,s+4,u+4),"person"===e.class)&&(P({x:r,y:c,width:o,height:a},O)&&(i=!0))})),u(i),e.forEach((function(e){var n=e.bbox[0],i=e.bbox[1];t.fillStyle="#000000",t.fillText(e.class,n,i)}))}),[O]),k=Object(i.useCallback)((function(e,t){t.detect(e).then((function(n){y(n),c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame((function(){k(e,t)}))}))}),[y]),P=function(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y};return Object(i.useEffect)((function(){n&&k(p.current,n)}),[n,k]),Object(i.useEffect)((function(){v()}),[v]),Object(f.jsxs)("div",{style:{width:window.innerWidth,height:window.innerHeight,textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#333"},children:[Object(f.jsxs)("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"},children:[Object(f.jsx)("h1",{style:{color:"#fff"},children:"\uc0ac\ub78c \uc778\uc2dd"}),Object(f.jsx)("p",{style:{color:"#fff"},children:"\ucd08\ub85d \ubc94\uc704\uc5d0 \uc0ac\ub78c\uc774 \ub4e4\uc5b4\uc624\uba74 \uc54c \uc218 \uc788\uc74c!"})]}),Object(f.jsx)("video",{style:{display:"none"},onLoadedData:Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.load({});case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)}))),ref:function(e){return p.current=e}}),Object(f.jsx)("canvas",{style:{border:s?"5px solid red":"5px solid #fff"},ref:function(e){return m.current=e}}),Object(f.jsxs)("div",{style:{color:"#fff",marginLeft:"16px"},children:[Object(f.jsxs)("div",{children:["x :",Object(f.jsx)("input",{type:"number",onChange:function(e){return d((function(t){return Object(l.a)(Object(l.a)({},t),{},{x:e.target.value})}))},value:O.x})]}),Object(f.jsxs)("div",{children:["y :",Object(f.jsx)("input",{type:"number",onChange:function(e){return d((function(t){return Object(l.a)(Object(l.a)({},t),{},{y:e.target.value})}))},value:O.y})]}),Object(f.jsxs)("div",{children:["w :",Object(f.jsx)("input",{type:"number",onChange:function(e){return d((function(t){return Object(l.a)(Object(l.a)({},t),{},{width:e.target.value})}))},value:O.width})]}),Object(f.jsxs)("div",{children:["h :",Object(f.jsx)("input",{type:"number",onChange:function(e){return d((function(t){return Object(l.a)(Object(l.a)({},t),{},{height:e.target.value})}))},value:O.height})]})]})]})}})]})}),document.getElementById("root")),Z()}},[[432,1,2]]]);
//# sourceMappingURL=main.f7c78496.chunk.js.map