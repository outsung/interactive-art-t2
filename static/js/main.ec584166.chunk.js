(this["webpackJsonpinteractive-art-t2"]=this["webpackJsonpinteractive-art-t2"]||[]).push([[0],{379:function(t,e,n){},412:function(t,e){},413:function(t,e){},421:function(t,e){},424:function(t,e){},425:function(t,e){},439:function(t,e,n){"use strict";n.r(e);var r=n(16),o=n.n(r),i=n(178),c=n.n(i),a=(n(379),n(1)),s=n(44),u=n(445),j=(n(442),n(443),n(136)),f=n(42),l=n(36),b=n(317),O=n(26);function p(t){var e=Object(s.g)(),n=e.camera,o=e.gl.domElement,i=Object(r.useRef)({});return Object(s.e)((function(){return i.current.update()})),Object(O.jsx)("orbitControls",Object(l.a)(Object(l.a)({},t),{},{ref:i,args:[n,o]}))}Object(s.d)({OrbitControls:b.a});var h=n(8),d=n.n(h),g=n(14),x=n(23),m=n(6),y=(n(375),n(441)),v=n(76),w=n(447),P=n(448);function k(){var t=Object(r.useRef)(),e=Object(s.g)((function(t){return t.gl})),n=Object(s.f)(a.TextureLoader,"/interactive-art-t2/waternormals.jpeg");n.wrapS=n.wrapT=a.RepeatWrapping;var o=Object(r.useMemo)((function(){return new a.PlaneGeometry(1e4,1e4)}),[]),i=Object(r.useMemo)((function(){return{textureWidth:512,textureHeight:512,waterNormals:n,sunDirection:new a.Vector3,sunColor:0,waterColor:0,distortionScale:3.7,fog:!1,format:e.encoding}}),[e.encoding,n]);return Object(s.e)((function(e,n){return t.current.material.uniforms.time.value+=n})),Object(O.jsx)("water",{ref:t,args:[o,i],"position-y":-5,"rotation-x":-Math.PI/2})}function M(){var t=Object(r.useRef)();return Object(s.e)((function(e,n){t.current.position.y=10+20*Math.sin(e.clock.elapsedTime),t.current.rotation.x=t.current.rotation.y=t.current.rotation.z+=n})),Object(O.jsx)(H,{ref:t,x:0,y:0,z:0,url:"/lantern.glb"})}Object(s.d)({Water:y.a});var A=n(2),S=n(320),C=n.n(S),L=function t(){Object(A.a)(this,t)};L.instance=null,L.init=function(){L.instance=C()("https://interactive-art-t2-server.herokuapp.com",{forceNew:!0,timeout:5e3,transports:["websocket"]})},L.disconnect=function(){var t;return null===(t=L.instance)||void 0===t?void 0:t.close()},Object(s.d)({Water:y.a});function F(t){var e=t.d,n=t.t,o=t.children,i=Object(r.useRef)(),c=Object(v.useSpring)({from:{springXZ:-1},to:{springXZ:1},loop:{reverse:!0},config:{duration:n/3*2}}).springXZ,a=Object(v.useSpring)({from:{springY:-1},to:{springY:1},loop:{reverse:!0},config:{duration:n}}).springY;return Object(s.e)((function(){i.current.position.z=Math.cos(c.get())*e/2,i.current.position.x=Math.sin(c.get())*e/2,i.current.position.y=Math.sin(a.get())*e})),Object(O.jsx)(v.a.group,{ref:i,children:o})}var R=function(){return Object(O.jsx)(H,{x:Math.floor(200*Math.random()-100),y:Math.floor(30*Math.random()),z:Math.floor(100*Math.random()-50),url:"/lantern.glb"})};function z(){var t=Object(r.useState)(Array.from(Array(100)).map((function(t,e){return Object(O.jsx)(R,{},e)}))),e=Object(m.a)(t,2),n=e[0],o=e[1],i=Object(r.useCallback)((function(){o((function(t){return[].concat(Object(x.a)(t),[Object(O.jsx)(R,{},t.length+1)])}))}),[]);return Z(),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("pointLight",{position:[0,-10,0],intensity:1.5}),Object(O.jsx)(B,{}),Object(O.jsxs)(r.Suspense,{fallback:Object(O.jsx)(O.Fragment,{}),children:[Object(O.jsx)(k,{}),Object(O.jsx)(F,{t:3e3,d:.1,children:n}),Object(O.jsx)("pointLight",{position:[0,-4,10],intensity:1.5}),Object(r.useMemo)((function(){return Object(O.jsx)(D,{addLenterns:i,x:-4,y:-2,z:52})}),[i])]})]})}function E(){return Object(O.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:100},children:Object(O.jsxs)(s.a,{translate:!0,onCreated:function(t){return t.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,70],fov:60},children:[Object(O.jsx)(z,{}),Object(O.jsx)(p,{}),Object(O.jsx)("gridHelper",{})]})})}function T(t){return 1-Math.cos(t*Math.PI/2)}function I(t){return Math.sin(t*Math.PI/2)}function W(t){return-(Math.cos(Math.PI*t)-1)/2}function D(t){var e=t.addLenterns,n=t.x,o=t.y,i=t.z,c=Object(r.useState)(!1),u=Object(m.a)(c,2),j=u[0],f=u[1],l=Object(r.useState)(0),b=Object(m.a)(l,2),p=b[0],h=b[1],x=Object(r.useRef)(),y=Object(r.useRef)([]),w=Object(v.useSpringRef)(),P=Object(v.useSpring)((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0],ref:w}})),k=Object(m.a)(P,2),M=k[0],A=M.lenternPosition1,S=M.cameraPosition1,C=k[1],F=Object(v.useSpringRef)(),R=Object(v.useSpring)((function(){return{lenternPosition2:[0,0,0],cameraPosition2:[0,0],cameraLookAt2:[0],ref:F}})),z=Object(m.a)(R,2),E=z[0],D=E.lenternPosition2,V=E.cameraPosition2,Z=E.cameraLookAt2,B=z[1],_=Object(v.useSpringRef)(),N=Object(v.useSpring)((function(){return{lenternPosition3:[0,0,0],cameraPosition3:[0,0],cameraLookAt3:[0],ref:_}})),U=Object(m.a)(N,2),X=U[0],Y=X.lenternPosition3,q=X.cameraPosition3,G=X.cameraLookAt3,J=U[1],Q=Object(v.useSpringRef)(),K=Object(v.useSpring)((function(){return{cameraPosition4:[0,0],cameraLookAt4:[0],ref:Q}})),$=Object(m.a)(K,2),tt=$[0],et=tt.cameraPosition4,nt=tt.cameraLookAt4,rt=$[1],ot=Object(v.useSpringRef)(),it=Object(v.useSpring)((function(){return{lenternPosition5:[0,0,0],ref:ot}})),ct=Object(m.a)(it,2),at=ct[0].lenternPosition5,st=ct[1],ut=Object(v.useSpringRef)(),jt=Object(v.useSpring)((function(){return{lenternPosition6:[0,0,0],ref:ut}})),ft=Object(m.a)(jt,2),lt=ft[0].lenternPosition6,bt=ft[1];Object(s.e)((function(t){var e=A.get(),n=Object(m.a)(e,3),r=n[0],o=n[1],i=n[2],c=D.get(),s=Object(m.a)(c,3),u=s[0],j=s[1],f=s[2],l=Y.get(),b=Object(m.a)(l,3),O=b[0],p=b[1],h=b[2],d=at.get(),g=Object(m.a)(d,3),y=g[0],v=g[1],w=g[2],P=lt.get(),k=Object(m.a)(P,3),M=k[0],C=k[1],L=k[2],F=S.get(),R=Object(m.a)(F,2),z=R[0],E=R[1],T=V.get(),I=Object(m.a)(T,2),W=I[0],H=I[1],B=q.get(),_=Object(m.a)(B,2),N=_[0],U=_[1],X=et.get(),J=Object(m.a)(X,2),Q=J[0],K=J[1],$=Z.get(),tt=Object(m.a)($,1)[0],rt=G.get(),ot=Object(m.a)(rt,1)[0],it=nt.get(),ct=Object(m.a)(it,1)[0],st=z+W+N+Q,ut=E+H+U+K;t.camera.lookAt(new a.Vector3(st,ut+tt+ot+ct,0)),t.camera.position.x=st,t.camera.position.y=ut,x.current.position.x=r+u+O+y+M,x.current.position.y=o+j+p+v+C,x.current.position.z=i+f+h+w+L}));var Ot=Object(r.useCallback)(Object(g.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0,0],config:{duration:1}}})),B({lenternPosition2:[0,0,0],cameraPosition2:[0,0,0],cameraLookAt2:[0,0,0],config:{duration:1}}),J({lenternPosition3:[0,0,0],cameraPosition3:[0,0,0],cameraLookAt3:[0,0,0],config:{duration:1}}),rt({cameraPosition4:[0,0,0],cameraLookAt4:[0,0,0],config:{duration:1}}),st({lenternPosition5:[0,0,0],config:{duration:1}}),bt({lenternPosition6:[0,0,0],config:{duration:1}}),e(),f(!1),h(0);case 9:case"end":return t.stop()}}),t)}))),[e,C,B,J,rt,st,bt]),pt=Object(r.useCallback)(Object(g.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C((function(){return{lenternPosition1:[30,27,-5],cameraPosition1:[20,23,0],config:{duration:7e3,easing:T}}})),y.current[0]=setTimeout((function(){B({lenternPosition2:[15,12,-15],cameraPosition2:[2,5,0],cameraLookAt2:[0,3,0],config:{duration:5e3}})}),7e3),y.current[1]=setTimeout((function(){J({lenternPosition3:[19,14,-20],cameraPosition3:[0,0,0],cameraLookAt3:[0,2,0],config:{duration:5e3,easing:I}})}),12e3),y.current[2]=setTimeout((function(){rt({cameraPosition4:[-22,-28,0],cameraLookAt4:[0,-5,0],config:{duration:7e3,easing:W}})}),19e3),y.current[3]=setTimeout((function(){st({lenternPosition5:[-64,-58,30],config:{duration:1}})}),22e3),y.current[4]=setTimeout((function(){bt({lenternPosition6:[0,5,10],config:{duration:5e3,easing:W}})}),24e3),y.current[5]=setTimeout((function(){Ot()}),3e4);case 7:case"end":return t.stop()}}),t)}))),[Ot,C,B,J,rt,st,bt]),ht=Object(r.useCallback)((function(){console.log("onClick",j),j||(console.log("!!!animationStart!!!"),pt(),f(!0))}),[pt,j]);Object(r.useEffect)((function(){var t,e;console.log("useEffect",L.instance),null===(t=L.instance)||void 0===t||t.on("upIntensity",(function(){console.log("upIntensity"),h((function(t){return t+1}))})),null===(e=L.instance)||void 0===e||e.on("animationStart",(function(){console.log("animationStart"),ht()}))}),[ht]);var dt=Object(r.useCallback)((function(){h(p+.1)}),[p]);return Object(r.useEffect)((function(){return function(){y.current.map((function(t){return t&&t.current()}))}}),[]),Object(O.jsxs)("mesh",{ref:x,onPointerEnter:dt,onClick:ht,children:[Object(O.jsx)("pointLight",{distance:10,position:[n+5,o,i-4],intensity:p,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n-5,o,i+1],intensity:p,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n,o,i+9],intensity:p,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n+5,o,i+6],intensity:p,color:"#FFE97A"}),Object(O.jsx)("pointLight",{position:[n,o-2.5,i+3],intensity:.6}),Object(r.useMemo)((function(){return Object(O.jsx)(H,{x:n,y:o,z:i,url:"/lantern.glb"})}),[n,o,i])]})}var H=o.a.forwardRef((function(t,e){var n=t.x,o=t.y,i=t.z,c=t.url,a=Object(u.a)("/interactive-art-t2"+c).scene,s=Object(r.useMemo)((function(){return a.clone()}),[a]);return console.log(s),s?Object(O.jsx)("group",{ref:e,position:[n,o,i],scale:.005,children:Object(O.jsx)("primitive",{object:s})}):null}));var V=["lf","rt","up","dn","ft","bk"].map((function(t){return"/interactive-art-t2/Skybox/nightsky_"+t+".png"})),Z=function(){var t=Object(s.g)().scene;return Object(r.useEffect)((function(){var e=(new a.CubeTextureLoader).load(V);t.background=e}),[t]),null};function B(){return Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{brightness:-.27,contrast:-.3}),Object(O.jsx)(j.c,{focusDistance:.03,focalLength:.07,bokehScale:4,height:480}),Object(O.jsx)(j.a,{intensity:1,blurPass:void 0,width:f.y.AUTO_SIZE,height:f.y.AUTO_SIZE,kernelSize:f.r.LARGE,luminanceThreshold:.1,luminanceSmoothing:.025}),Object(O.jsx)(j.e,{opacity:.02}),Object(O.jsx)(j.g,{eskil:!1,offset:.1})]})}function _(){return Z(),null}n(235),n(234),n(438);var N=n(372);var U=n(444),X=n(373);function Y(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function q(t,e,n){return Math.min(Math.max(t,e),n)}function G(){var t=20,e=20,n=20,o=.06,i=0,c=0,u=0,j=Object(r.useRef)(Array.from(Array(t)).map((function(t,r){return Array.from(Array(e)).map((function(t,e){return Array.from(Array(n)).map((function(t,e){return null}))}))}))),f=1e3,l=Object(r.useRef)(Array.from(Array(f)).map((function(){return null}))),b=Object(r.useMemo)((function(){return Array.from(Array(f)).map((function(r,o){return new a.Vector3(Y(0,5*t),Y(0,5*e),Y(0,5*n))}))}),[t,e,n]),p=Object(r.useMemo)((function(){return[new a.Euler(0,0,0),new a.Quaternion(0,0,0,0)]}),[]),h=Object(m.a)(p,2),d=h[0],g=h[1],x=Object(X.makeNoise4D)(),y=function(t,e){},v=function(r,o){var i=new a.Vector3(Math.floor(q(r.position.x/5,0,t-1)),Math.floor(q(r.position.y/5,0,e-1)),Math.floor(q(r.position.z/5,0,n-1))),c=j.current[i.x][i.y][i.z];d.set(c.rotation.x,c.rotation.y,c.rotation.z),g.setFromEuler(d),r.quaternion.rotateTowards(g,.2*o),r.position.x+=5*r.rotation.x*o,r.position.y+=5*r.rotation.y*o,r.position.z+=5*r.rotation.z*o,r.position.x<0&&(r.position.x=100),r.position.y<0&&(r.position.y=100),r.position.z<0&&(r.position.z=100),r.position.x>100&&(r.position.x=0),r.position.y>100&&(r.position.y=0),r.position.z>100&&(r.position.z=0)};return Object(s.e)((function(r,s){!function(r){for(var s=0,f=0;f<t;f++){for(var l=0,b=0;b<e;b++){for(var O=0,p=0;p<n;p++){var h=x(s+i,l+c,O+u,r/1e4)+1,d=new a.Vector3(Math.cos(h*Math.PI),Math.sin(h*Math.PI),Math.cos(h*Math.PI)).normalize();j.current[f][b][p].setDirection(d),j.current[f][b][p].setColor(new a.Color(d.x,d.y,d.z,.4)),j.current[f][b][p].setLength(1),O+=o}l+=o}s+=o}}(r.clock.oldTime),function(t){for(var e=0;e<f;e++)v(l.current[e],t),y(l.current[e],t)}(s)})),console.log({_amountOfParticles:f}),Object(O.jsxs)("group",{children:[Array.from(Array(f)).map((function(t,e){return Object(O.jsx)(U.a,{ref:function(t){return l.current[e]=t},position:b[e],scale:1,children:Object(O.jsx)("meshBasicMaterial",{transparent:!0,opacity:.3,attach:"material",color:"#fff"})},e)})),Array.from(Array(t)).map((function(t,r){return Array.from(Array(e)).map((function(t,e){return Array.from(Array(n)).map((function(t,n){return Object(O.jsx)("arrowHelper",{ref:function(t){return j.current[r][e][n]=t},position:[5*r,5*e,5*n],args:[new a.Vector3(0,0,0)]},"".concat(r,"-").concat(e,"-").concat(n))}))}))}))]})}var J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,449)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),r(t),o(t),i(t),c(t)}))},Q=n(446),K=n(118),$=Object(K.a)({basename:"/interactive-art-t2"});L.init(),c.a.render(Object(O.jsx)(Q.b,{history:$,children:Object(O.jsxs)(Q.c,{children:[Object(O.jsx)(Q.a,{exact:!0,path:"/",component:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(E,{}),Object(O.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:Object(O.jsxs)(s.a,{translate:!0,colorManagement:!0,shadowMap:!0,camera:{position:[-5,3,6],fov:60},children:[Object(O.jsx)(_,{}),Object(O.jsx)(p,{}),Object(O.jsx)("gridHelper",{})]})})]})}}),Object(O.jsx)(Q.a,{exact:!0,path:"/main",component:E}),Object(O.jsx)(Q.a,{exact:!0,path:"/camera",component:function(){var t=Object(r.useState)(null),e=Object(m.a)(t,2),n=e[0],o=e[1],i=Object(r.useRef)(null),c=Object(r.useState)(!1),a=Object(m.a)(c,2),s=a[0],u=a[1],j=Object(r.useState)({x:300,y:300,width:50,height:50}),f=Object(m.a)(j,2),b=f[0],p=f[1],h=Object(r.useRef)(null),x=Object(r.useRef)(null),y=Object(r.useCallback)((function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then((function(t){h.current.srcObject=t,h.current.onloadedmetadata=function(){h.current.play()}}))}),[]),v=Object(r.useCallback)((function(t){var e=x.current.getContext("2d");x.current.width=h.current.videoWidth,x.current.height=h.current.videoHeight,e.clearRect(0,0,e.canvas.width,e.canvas.height);var n="16px sans-serif";e.font=n,e.textBaseline="top",e.drawImage(h.current,0,0,h.current.videoWidth,h.current.videoHeight);var r=!1;e.strokeStyle="green",e.lineWidth=3,e.strokeRect(b.x,b.y,b.width,b.height),t.forEach((function(t){var o=t.bbox[0],i=t.bbox[1],c=t.bbox[2],a=t.bbox[3];e.strokeStyle="#00FFFF",e.lineWidth=2,e.strokeRect(o,i,c,a),e.fillStyle="#00FFFF";var s=e.measureText(t.class).width,u=parseInt(n,10);(e.fillRect(o,i,s+4,u+4),"person"===t.class)&&(P({x:o,y:i,width:c,height:a},b)&&(r=!0))})),u(r),t.forEach((function(t){var n=t.bbox[0],r=t.bbox[1];e.fillStyle="#000000",e.fillText(t.class,n,r)}))}),[b]),w=Object(r.useCallback)((function(t,e){e.detect(t).then((function(n){v(n),i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame((function(){w(t,e)}))}))}),[v]),P=function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y};return Object(r.useEffect)((function(){L.instance&&L.instance.emit("animationStart")}),[s]),Object(r.useEffect)((function(){n&&w(h.current,n)}),[n,w]),Object(r.useEffect)((function(){y()}),[y]),Object(O.jsxs)("div",{style:{width:window.innerWidth,height:window.innerHeight,textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#333"},children:[Object(O.jsxs)("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"},children:[Object(O.jsx)("h1",{style:{color:"#fff"},children:"\uc0ac\ub78c \uc778\uc2dd"}),Object(O.jsx)("p",{style:{color:"#fff"},children:"\ucd08\ub85d \ubc94\uc704\uc5d0 \uc0ac\ub78c\uc774 \ub4e4\uc5b4\uc624\uba74 \uc54c \uc218 \uc788\uc74c!"})]}),Object(O.jsx)("video",{style:{display:"none"},onLoadedData:Object(g.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.load({});case 2:e=t.sent,o(e);case 4:case"end":return t.stop()}}),t)}))),ref:function(t){return h.current=t}}),Object(O.jsx)("canvas",{style:{border:s?"5px solid red":"5px solid #fff"},ref:function(t){return x.current=t}}),Object(O.jsxs)("div",{style:{color:"#fff",marginLeft:"16px"},children:[Object(O.jsxs)("div",{children:["x :",Object(O.jsx)("input",{type:"number",onChange:function(t){return p((function(e){return Object(l.a)(Object(l.a)({},e),{},{x:t.target.value})}))},value:b.x})]}),Object(O.jsxs)("div",{children:["y :",Object(O.jsx)("input",{type:"number",onChange:function(t){return p((function(e){return Object(l.a)(Object(l.a)({},e),{},{y:t.target.value})}))},value:b.y})]}),Object(O.jsxs)("div",{children:["w :",Object(O.jsx)("input",{type:"number",onChange:function(t){return p((function(e){return Object(l.a)(Object(l.a)({},e),{},{width:t.target.value})}))},value:b.width})]}),Object(O.jsxs)("div",{children:["h :",Object(O.jsx)("input",{type:"number",onChange:function(t){return p((function(e){return Object(l.a)(Object(l.a)({},e),{},{height:t.target.value})}))},value:b.height})]})]})]})}}),Object(O.jsx)(Q.a,{exact:!0,path:"/ocean",component:function(){return Object(O.jsxs)(s.a,{camera:{position:[0,5,100],fov:55,near:1,far:2e4},children:[Object(O.jsx)("pointLight",{position:[100,100,100]}),Object(O.jsx)("pointLight",{position:[-100,-100,-100]}),Object(O.jsxs)(r.Suspense,{fallback:null,children:[Object(O.jsx)(k,{}),Object(O.jsx)(M,{})]}),Object(O.jsx)(w.a,{scale:1e3,sunPosition:[500,150,-1e3],turbidity:.1}),Object(O.jsx)(P.a,{})]})}}),Object(O.jsx)(Q.a,{exact:!0,path:"/perlin",component:function(){return Object(O.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%"},children:Object(O.jsxs)(s.a,{translate:!0,onCreated:function(t){return t.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,77],fov:60},children:[Object(O.jsx)(G,{}),Object(O.jsx)(p,{}),Object(O.jsx)("gridHelper",{})]})})}})]})}),document.getElementById("root")),J()}},[[439,1,2]]]);
//# sourceMappingURL=main.ec584166.chunk.js.map