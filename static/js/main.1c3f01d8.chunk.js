(this["webpackJsonpinteractive-art-t2"]=this["webpackJsonpinteractive-art-t2"]||[]).push([[0],{116:function(t,e,n){"use strict";n.r(e);var o=n(6),i=n(34),r=n.n(i),c=(n(80),n(0)),a=n(17),s=n(120),u=(n(119),n(121),n(35)),j=n(12),b=n(9),f=n(72),l=n(11);function O(t){var e=Object(a.g)(),n=e.camera,i=e.gl.domElement,r=Object(o.useRef)({});return Object(a.e)((function(){return r.current.update()})),Object(l.jsx)("orbitControls",Object(b.a)(Object(b.a)({},t),{},{ref:r,args:[n,i]}))}Object(a.d)({OrbitControls:f.a});var g=n(19),p=n.n(g),m=n(27),d=n(16),h=n(10),x=(n(76),n(21)),P=n(1),v=n(75),k=n.n(v),S=function t(){Object(P.a)(this,t)};S.instance=null,S.init=function(){S.instance=k()("http://192.168.219.196:5000",{forceNew:!0,timeout:5e3,transports:["websocket"]})},S.disconnect=function(){var t;return null===(t=S.instance)||void 0===t?void 0:t.close()};function y(t){var e=t.d,n=t.t,i=t.children,r=Object(o.useRef)(),c=Object(x.useSpring)({from:{springXZ:-1},to:{springXZ:1},loop:{reverse:!0},config:{duration:n/3*2}}).springXZ,s=Object(x.useSpring)({from:{springY:-1},to:{springY:1},loop:{reverse:!0},config:{duration:n}}).springY;return Object(a.e)((function(){r.current.position.z=Math.cos(c.get())*e/2,r.current.position.x=Math.sin(c.get())*e/2,r.current.position.y=Math.sin(s.get())*e})),Object(l.jsx)(x.a.group,{ref:r,children:i})}var L=function(){return Object(l.jsx)(I,{x:Math.floor(100*Math.random()),y:Math.floor(30*Math.random()),z:Math.floor(100*Math.random()-50),url:"./lantern.glb"})};function M(){var t=Object(o.useState)([L(),L(),L()]),e=Object(h.a)(t,2),n=e[0],i=e[1],r=Object(o.useCallback)((function(){i((function(t){return[].concat(Object(d.a)(t),[L()])}))}),[]);return E(),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("pointLight",{position:[0,-10,0],intensity:1.5}),Object(l.jsx)(F,{}),Object(l.jsxs)(o.Suspense,{fallback:Object(l.jsx)(l.Fragment,{}),children:[Object(l.jsx)(y,{t:3e3,d:.1,children:n}),Object(l.jsx)("pointLight",{position:[0,-4,10],intensity:1.5}),Object(o.useMemo)((function(){return Object(l.jsx)(R,{addLenterns:r,x:-4,y:-2,z:52})}),[r])]})]})}function A(){return Object(l.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:100},children:Object(l.jsxs)(a.a,{translate:!0,onCreated:function(t){return t.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,60],fov:60},children:[Object(l.jsx)(M,{}),Object(l.jsx)(O,{}),Object(l.jsx)("gridHelper",{})]})})}function w(t){return 1-Math.cos(t*Math.PI/2)}function C(t){return Math.sin(t*Math.PI/2)}function T(t){return-(Math.cos(Math.PI*t)-1)/2}function R(t){var e=t.addLenterns,n=t.x,i=t.y,r=t.z,s=Object(o.useState)(!1),u=Object(h.a)(s,2),j=u[0],b=u[1],f=Object(o.useState)(0),O=Object(h.a)(f,2),g=O[0],d=O[1],P=Object(o.useRef)(),v=Object(o.useRef)([]),k=Object(x.useSpringRef)(),y=Object(x.useSpring)((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0],ref:k}})),L=Object(h.a)(y,2),M=L[0],A=M.lenternPosition1,R=M.cameraPosition1,z=L[1],E=Object(x.useSpringRef)(),F=Object(x.useSpring)((function(){return{lenternPosition2:[0,0,0],cameraPosition2:[0,0],cameraLookAt2:[0],ref:E}})),Z=Object(h.a)(F,2),X=Z[0],Y=X.lenternPosition2,_=X.cameraPosition2,B=X.cameraLookAt2,H=Z[1],J=Object(x.useSpringRef)(),U=Object(x.useSpring)((function(){return{lenternPosition3:[0,0,0],cameraPosition3:[0,0],cameraLookAt3:[0],ref:J}})),D=Object(h.a)(U,2),G=D[0],N=G.lenternPosition3,V=G.cameraPosition3,q=G.cameraLookAt3,K=D[1],Q=Object(x.useSpringRef)(),W=Object(x.useSpring)((function(){return{cameraPosition4:[0,0],cameraLookAt4:[0],ref:Q}})),$=Object(h.a)(W,2),tt=$[0],et=tt.cameraPosition4,nt=tt.cameraLookAt4,ot=$[1],it=Object(x.useSpringRef)(),rt=Object(x.useSpring)((function(){return{lenternPosition5:[0,0,0],ref:it}})),ct=Object(h.a)(rt,2),at=ct[0].lenternPosition5,st=ct[1],ut=Object(x.useSpringRef)(),jt=Object(x.useSpring)((function(){return{lenternPosition6:[0,0,0],ref:ut}})),bt=Object(h.a)(jt,2),ft=bt[0].lenternPosition6,lt=bt[1];Object(a.e)((function(t){var e=A.get(),n=Object(h.a)(e,3),o=n[0],i=n[1],r=n[2],a=Y.get(),s=Object(h.a)(a,3),u=s[0],j=s[1],b=s[2],f=N.get(),l=Object(h.a)(f,3),O=l[0],g=l[1],p=l[2],m=at.get(),d=Object(h.a)(m,3),x=d[0],v=d[1],k=d[2],S=ft.get(),y=Object(h.a)(S,3),L=y[0],M=y[1],w=y[2],C=R.get(),T=Object(h.a)(C,2),I=T[0],z=T[1],E=_.get(),F=Object(h.a)(E,2),Z=F[0],X=F[1],H=V.get(),J=Object(h.a)(H,2),U=J[0],D=J[1],G=et.get(),K=Object(h.a)(G,2),Q=K[0],W=K[1],$=B.get(),tt=Object(h.a)($,1)[0],ot=q.get(),it=Object(h.a)(ot,1)[0],rt=nt.get(),ct=Object(h.a)(rt,1)[0],st=I+Z+U+Q,ut=z+X+D+W;t.camera.lookAt(new c.Vector3(st,ut+tt+it+ct,0)),t.camera.position.x=st,t.camera.position.y=ut,P.current.position.x=o+u+O+x+L,P.current.position.y=i+j+g+v+M,P.current.position.z=r+b+p+k+w}));var Ot=Object(o.useCallback)(Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0,0],config:{duration:1}}})),H({lenternPosition2:[0,0,0],cameraPosition2:[0,0,0],cameraLookAt2:[0,0,0],config:{duration:1}}),K({lenternPosition3:[0,0,0],cameraPosition3:[0,0,0],cameraLookAt3:[0,0,0],config:{duration:1}}),ot({cameraPosition4:[0,0,0],cameraLookAt4:[0,0,0],config:{duration:1}}),st({lenternPosition5:[0,0,0],config:{duration:1}}),lt({lenternPosition6:[0,0,0],config:{duration:1}}),e(),b(!1),d(0);case 9:case"end":return t.stop()}}),t)}))),[e,z,H,K,ot,st,lt]),gt=Object(o.useCallback)(Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z((function(){return{lenternPosition1:[30,27,-5],cameraPosition1:[20,23,0],config:{duration:7e3,easing:w}}})),v.current[0]=setTimeout((function(){H({lenternPosition2:[15,12,-15],cameraPosition2:[2,5,0],cameraLookAt2:[0,3,0],config:{duration:5e3}})}),7e3),v.current[1]=setTimeout((function(){K({lenternPosition3:[19,14,-20],cameraPosition3:[0,0,0],cameraLookAt3:[0,2,0],config:{duration:5e3,easing:C}})}),12e3),v.current[2]=setTimeout((function(){ot({cameraPosition4:[-22,-28,0],cameraLookAt4:[0,-5,0],config:{duration:7e3,easing:T}})}),19e3),v.current[3]=setTimeout((function(){st({lenternPosition5:[-64,-58,30],config:{duration:1}})}),22e3),v.current[4]=setTimeout((function(){lt({lenternPosition6:[0,5,10],config:{duration:5e3,easing:T}})}),24e3),v.current[5]=setTimeout((function(){Ot()}),3e4);case 7:case"end":return t.stop()}}),t)}))),[Ot,z,H,K,ot,st,lt]),pt=Object(o.useCallback)((function(){console.log("onClick",j),j||(console.log("!!!animationStart!!!"),gt(),b(!0))}),[gt,j]);return Object(o.useEffect)((function(){var t,e;console.log("useEffect",S.instance),null===(t=S.instance)||void 0===t||t.on("upIntensity",(function(){console.log("upIntensity"),d((function(t){return t+1}))})),null===(e=S.instance)||void 0===e||e.on("animationStart",(function(){console.log("animationStart"),pt()}))}),[pt]),Object(o.useEffect)((function(){return function(){v.current.map((function(t){return t&&t.current()}))}}),[]),Object(l.jsxs)("mesh",{ref:P,onClick:pt,children:[Object(l.jsx)("pointLight",{distance:10,position:[n,i+5,r+9],intensity:g}),Object(l.jsx)("pointLight",{position:[n,i-2.5,r+3],intensity:.6}),Object(o.useMemo)((function(){return Object(l.jsx)(I,{x:n,y:i,z:r,url:"./lantern.glb"})}),[n,i,r])]})}function I(t){var e=t.x,n=t.y,i=t.z,r=t.url,c=Object(s.a)(r).scene,a=Object(o.useMemo)((function(){return c.clone()}),[c]);return console.log(a),a?Object(l.jsx)("group",{position:[e,n,i],scale:.005,children:Object(l.jsx)("primitive",{object:a})}):null}var z=["lf","rt","up","dn","ft","bk"].map((function(t){return"./Skybox/nightsky_"+t+".png"})),E=function(){var t=Object(a.g)().scene;return Object(o.useEffect)((function(){var e=(new c.CubeTextureLoader).load(z);t.background=e,t.environment=e}),[t]),null};function F(){return Object(l.jsxs)(u.b,{children:[Object(l.jsx)(u.a,{intensity:1,blurPass:void 0,width:j.y.AUTO_SIZE,height:j.y.AUTO_SIZE,kernelSize:j.r.LARGE,luminanceThreshold:0,luminanceSmoothing:.025}),Object(l.jsx)(u.c,{opacity:.02}),Object(l.jsx)(u.e,{eskil:!1,offset:.1})]})}function Z(){return E(),null}function X(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(A,{}),Object(l.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:Object(l.jsxs)(a.a,{translate:!0,colorManagement:!0,shadowMap:!0,camera:{position:[-5,3,6],fov:60},children:[Object(l.jsx)(Z,{}),Object(l.jsx)(O,{}),Object(l.jsx)("gridHelper",{})]})})]})}var Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(e){var n=e.getCLS,o=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),o(t),i(t),r(t),c(t)}))};S.init(),r.a.render(Object(l.jsx)(X,{}),document.getElementById("root")),Y()},80:function(t,e,n){}},[[116,1,2]]]);
//# sourceMappingURL=main.1c3f01d8.chunk.js.map