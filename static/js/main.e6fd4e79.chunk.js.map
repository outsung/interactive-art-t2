{"version":3,"sources":["Controls.js","Ocean/index.js","utils/socket.js","Main/index.js","App.js","Perlin/index.js","reportWebVitals.js","utils/browserHistory.js","index.js","Camera/index.js"],"names":["Controls","props","useThree","camera","domElement","gl","controls","useRef","useFrame","current","update","ref","args","extend","OrbitControls","Ocean","state","waterNormals","useLoader","THREE","process","wrapS","wrapT","geom","useMemo","config","textureWidth","textureHeight","sunDirection","sunColor","waterColor","distortionScale","fog","format","encoding","delta","material","uniforms","time","value","position-y","rotation-x","Math","PI","Box","position","y","sin","clock","elapsedTime","rotation","x","z","LanternOfGLTF","url","Water","Socket","instance","init","io","forceNew","timeout","transports","disconnect","close","AnimationBox","d","t","children","springXZ","useSpring","from","to","loop","reverse","duration","springY","cos","get","group","GetLenterns","floor","random","Scene","useState","Array","map","i","Lenterns","setLenterns","addLenterns","useCallback","prev","length","useSkybox","intensity","Effects","fallback","MainLentern","Main","style","width","height","zIndex","translate","onCreated","setClearColor","colorManagement","shadowMap","fov","easeInSine","easeOutSine","easeInOutSine","isPlayAnimation","setIsPlayAnimation","setIntensity","closeTimeoutRef","checkPoint1","useSpringRef","lenternPosition1","cameraPosition1","checkPointAPI1","checkPoint2","lenternPosition2","cameraPosition2","cameraLookAt2","checkPointAPI2","checkPoint3","lenternPosition3","cameraPosition3","cameraLookAt3","checkPointAPI3","checkPoint4","cameraPosition4","cameraLookAt4","checkPointAPI4","checkPoint5","lenternPosition5","checkPointAPI5","checkPoint6","lenternPosition6","checkPointAPI6","l_x1","l_y1","l_z1","l_x2","l_y2","l_z2","l_x3","l_y3","l_z3","l_x5","l_y5","l_z5","l_x6","l_y6","l_z6","c_x1","c_y1","c_x2","c_y2","c_x3","c_y3","c_x4","c_y4","cl_y2","cl_y3","cl_y4","cameraX","cameraY","lookAt","animationReset","a","animationStart","easing","setTimeout","onClick","console","log","useEffect","on","onEnter","onPointerEnter","distance","color","React","forwardRef","scene","useGLTF","copiedScene","clone","scale","object","imagePaths","img","mat","load","background","brightness","contrast","focusDistance","focalLength","bokehScale","blurPass","undefined","Resizer","AUTO_SIZE","kernelSize","KernelSize","LARGE","luminanceThreshold","luminanceSmoothing","opacity","eskil","offset","rand","start","end","clamp","min","max","_gridSize","_increment","_offset","arrowHelperRefs","_amountOfParticles","particleRef","_particlePosition","rotationEuler","rotationQuaternion","_noise","makeNoise4D","applyRotation","deltaT","arrowHelperRef","set","setFromEuler","quaternion","rotateTowards","oldT","xOff","yOff","zOff","noise","normalDirection","normalize","setDirection","setColor","setLength","onFrameOfArrowHelper","oldTime","onFrameForParticle","b","transparent","attach","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","basename","ReactDOM","render","history","exact","path","component","model","setModel","animationFrameRef","isDetected","setIsDetected","detectionArea","setDetectionArea","video","canvas","webcamInit","navigator","mediaDevices","getUserMedia","audio","facingMode","stream","srcObject","onloadedmetadata","play","renderPredictions","predictions","ctx","getContext","videoWidth","videoHeight","clearRect","font","textBaseline","drawImage","check","strokeStyle","lineWidth","strokeRect","forEach","prediction","bbox","fillStyle","textWidth","measureText","class","textHeight","parseInt","fillRect","rectCollisionDetection","fillText","detectFrame","detect","cancelAnimationFrame","requestAnimationFrame","rect1","rect2","emit","window","innerWidth","innerHeight","textAlign","overflow","display","justifyContent","alignItems","backgroundColor","top","flexDirection","onLoadedData","cocoSSD","m","border","marginLeft","type","onChange","e","target","near","far","Sky","sunPosition","turbidity","document","getElementById"],"mappings":"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","file":"static/js/main.e6fd4e79.chunk.js","sourcesContent":["import React, { useRef } from 'react';\nimport { extend,  useThree, useFrame } from '@react-three/fiber';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\n\nextend({ OrbitControls });\n\nexport default function Controls(props){\n  const {\n    camera,\n    gl: { domElement },\n  } = useThree();\n  const controls = useRef({});\n\n  useFrame(() => controls.current.update());\n  return (\n    <orbitControls {...props} ref={controls} args={[camera, domElement]} />\n  );\n};\n","import * as THREE from \"three\";\nimport React, { Suspense, useRef, useMemo } from \"react\";\nimport {\n  Canvas,\n  extend,\n  useThree,\n  useLoader,\n  useFrame,\n} from \"@react-three/fiber\";\nimport { OrbitControls, Sky } from \"@react-three/drei\";\nimport { Water } from \"three-stdlib\";\n\nimport { LanternOfGLTF } from \"../App\";\n\nextend({ Water });\n\nexport function Ocean() {\n  const ref = useRef();\n  const gl = useThree((state) => state.gl);\n  const waterNormals = useLoader(\n    THREE.TextureLoader,\n    process.env.PUBLIC_URL + \"/waternormals.jpeg\"\n  );\n  waterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping;\n  const geom = useMemo(() => new THREE.PlaneGeometry(10000, 10000), []);\n  const config = useMemo(\n    () => ({\n      textureWidth: 512,\n      textureHeight: 512,\n      waterNormals,\n      sunDirection: new THREE.Vector3(),\n      sunColor: 0x000000,\n      waterColor: 0x000000,\n      distortionScale: 3.7,\n      fog: false,\n      format: gl.encoding,\n    }),\n    [gl.encoding, waterNormals]\n  );\n  useFrame(\n    (state, delta) => (ref.current.material.uniforms.time.value += delta)\n  );\n  return (\n    <water\n      ref={ref}\n      args={[geom, config]}\n      position-y={-5}\n      rotation-x={-Math.PI / 2}\n    />\n  );\n}\n\nfunction Box() {\n  const ref = useRef();\n  useFrame((state, delta) => {\n    ref.current.position.y = 10 + Math.sin(state.clock.elapsedTime) * 20;\n    ref.current.rotation.x =\n      ref.current.rotation.y =\n      ref.current.rotation.z +=\n        delta;\n  });\n  return <LanternOfGLTF ref={ref} x={0} y={0} z={0} url=\"/lantern.glb\" />;\n}\n\nexport default function App() {\n  return (\n    <Canvas camera={{ position: [0, 5, 100], fov: 55, near: 1, far: 20000 }}>\n      <pointLight position={[100, 100, 100]} />\n      <pointLight position={[-100, -100, -100]} />\n      <Suspense fallback={null}>\n        <Ocean />\n        <Box />\n      </Suspense>\n      <Sky scale={1000} sunPosition={[500, 150, -1000]} turbidity={0.1} />\n      <OrbitControls />\n    </Canvas>\n  );\n}\n","// ES6 import or TypeScript\nimport io from \"socket.io-client\";\n\nexport default class Socket {\n  static instance = null;\n  static init = () => {\n    Socket.instance = io(\"https://interactive-art-t2-server.herokuapp.com\", {\n      forceNew: true,\n      timeout: 5000,\n      transports: [\"websocket\"],\n    });\n  };\n  static disconnect = () => Socket.instance?.close();\n}\n","import React, {\n  Suspense,\n  useRef,\n  useState,\n  useMemo,\n  useEffect,\n  useCallback,\n} from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas, useFrame, useLoader, extend } from \"@react-three/fiber\";\n// import { Stars } from '@react-three/drei';\nimport { TextureLoader } from \"three/src/loaders/TextureLoader.js\";\nimport { Water } from \"three-stdlib\";\n\nimport Controls from \"../Controls\";\n\nimport { useSpring, a, useSpringRef } from \"@react-spring/three\";\n\nimport { LanternOfGLTF, Effects, useSkybox } from \"../App\";\nimport { Ocean } from \"../Ocean\";\n\nimport Socket from \"../utils/socket\";\n\n// function MainBox(){\n//     const mesh = useRef();\n//     // useFrame(() => (mesh.current.rotation.x = mesh.current.rotation.y += 0.01));\n//     const [expand, setExpand] = useState(false);\n\n//     return (\n//         <a.go  />\n//     );\n// }\n\nextend({ Water });\n\nexport const Background = () => {\n  const texture = useLoader(TextureLoader, \"./background.jpg\");\n\n  return (\n    <mesh>\n      <planeGeometry attach=\"geometry\" args={[1440 / 10, 718 / 10]} />\n      {texture && <meshBasicMaterial attach=\"material\" map={texture} />}\n    </mesh>\n  );\n};\n\n// function FloatingBox() {\n//     const ref = useRef()\n//     // const props = useSpring({\n//     //     position: expand ? [1.4, 1.4, 1.4] : [1, 1, 1],\n//     // });\n//     const props = useSpring({\n//         loop: { reverse: true },\n//         from: -1,\n//         to: 1,\n//         config: { duration: 2500 }\n//       });\n//     useFrame(() => {\n//         ref.current.position.y = Math.sin(props)\n//     })\n//     return  <a.mesh\n//         ref={ref}\n//     >\n//         <boxBufferGeometry attach=\"geometry\" args={[1, 1, 1]} />\n//         <a.meshStandardMaterial roughness={0.5} attach=\"material\" />\n//     </a.mesh>\n//     // return <group ref={ref}>{children}</group>\n// }\n\nfunction AnimationBox({ d, t, children }) {\n  const ref = useRef();\n  // create a common spring that will be used later to interpolate other values\n  const { springXZ } = useSpring({\n    from: { springXZ: -1 },\n    to: { springXZ: 1 },\n    loop: { reverse: true },\n    config: {\n      duration: (t / 3) * 2,\n\n      // friction: 10,\n      // tension: 6,\n      // frequency: 4,\n      // mass: 0\n    },\n  });\n  const { springY } = useSpring({\n    from: { springY: -1 },\n    to: { springY: 1 },\n    loop: { reverse: true },\n    config: {\n      duration: t,\n\n      // friction: 10,\n      // tension: 6,\n      // frequency: 4,\n      // mass: 0\n    },\n  });\n  // interpolate values from commong spring\n  // const positionXZ = spring.to([0, 1], [-0.1, 0.1]);\n\n  useFrame(() => {\n    ref.current.position.z = (Math.cos(springXZ.get()) * d) / 2;\n    ref.current.position.x = (Math.sin(springXZ.get()) * d) / 2;\n    ref.current.position.y = Math.sin(springY.get()) * d;\n  });\n\n  return (\n    // using a from react-spring will animate our component\n    <a.group ref={ref}>{children}</a.group>\n  );\n}\n\nconst GetLenterns = () => {\n  return (\n    <LanternOfGLTF\n      x={Math.floor(Math.random() * 200 - 100)}\n      y={Math.floor(Math.random() * 30)}\n      z={Math.floor(Math.random() * 100 - 50)}\n      url=\"/lantern.glb\"\n    />\n  );\n};\n\nfunction Scene() {\n  const [Lenterns, setLenterns] = useState(\n    Array.from(Array(100)).map((d, i) => <GetLenterns key={i} />)\n  );\n\n  const addLenterns = useCallback(() => {\n    setLenterns((prev) => [...prev, <GetLenterns key={prev.length + 1} />]);\n  }, []);\n\n  useSkybox();\n\n  return (\n    <>\n      <pointLight position={[0, -10, 0]} intensity={1.5} />\n      <Effects />\n      <Suspense fallback={<></>}>\n        <Ocean />\n\n        {/* <Bloom f={3}> */}\n        <AnimationBox t={3000} d={0.1}>\n          {Lenterns}\n        </AnimationBox>\n        <pointLight position={[0, -4, 10]} intensity={1.5} />\n        {useMemo(\n          () => (\n            <MainLentern addLenterns={addLenterns} x={-4} y={-2} z={52} />\n          ),\n          [addLenterns]\n        )}\n\n        {/* </Bloom> */}\n      </Suspense>\n    </>\n  );\n}\n\nexport default function Main() {\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: 100,\n      }}\n    >\n      <Canvas\n        translate={true}\n        onCreated={(state) => state.gl.setClearColor(0xffffff, 0)}\n        colorManagement\n        shadowMap\n        camera={{ position: [0, 0, 70], fov: 60 }}\n      >\n        <Scene />\n        <Controls />\n        <gridHelper />\n      </Canvas>\n    </div>\n  );\n}\n\nfunction easeInSine(x) {\n  return 1 - Math.cos((x * Math.PI) / 2);\n}\nfunction easeOutSine(x) {\n  return Math.sin((x * Math.PI) / 2);\n}\nfunction easeInOutSine(x) {\n  return -(Math.cos(Math.PI * x) - 1) / 2;\n}\n\nfunction MainLentern({ addLenterns, x, y, z }) {\n  const [isPlayAnimation, setIsPlayAnimation] = useState(false);\n  const [intensity, setIntensity] = useState(0);\n  const ref = useRef();\n  const closeTimeoutRef = useRef([]);\n\n  const checkPoint1 = useSpringRef();\n  const [{ lenternPosition1, cameraPosition1 }, checkPointAPI1] = useSpring(\n    () => ({\n      lenternPosition1: [0, 0, 0],\n      cameraPosition1: [0, 0],\n      ref: checkPoint1,\n    })\n  );\n  const checkPoint2 = useSpringRef();\n  const [{ lenternPosition2, cameraPosition2, cameraLookAt2 }, checkPointAPI2] =\n    useSpring(() => ({\n      lenternPosition2: [0, 0, 0],\n      cameraPosition2: [0, 0],\n      cameraLookAt2: [0],\n      ref: checkPoint2,\n    }));\n  const checkPoint3 = useSpringRef();\n  const [{ lenternPosition3, cameraPosition3, cameraLookAt3 }, checkPointAPI3] =\n    useSpring(() => ({\n      lenternPosition3: [0, 0, 0],\n      cameraPosition3: [0, 0],\n      cameraLookAt3: [0],\n      ref: checkPoint3,\n    }));\n  const checkPoint4 = useSpringRef();\n  const [{ cameraPosition4, cameraLookAt4 }, checkPointAPI4] = useSpring(\n    () => ({\n      cameraPosition4: [0, 0],\n      cameraLookAt4: [0],\n      ref: checkPoint4,\n    })\n  );\n  const checkPoint5 = useSpringRef();\n  const [{ lenternPosition5 }, checkPointAPI5] = useSpring(() => ({\n    lenternPosition5: [0, 0, 0],\n    ref: checkPoint5,\n  }));\n  const checkPoint6 = useSpringRef();\n  const [{ lenternPosition6 }, checkPointAPI6] = useSpring(() => ({\n    lenternPosition6: [0, 0, 0],\n    ref: checkPoint6,\n  }));\n\n  useFrame((state) => {\n    // x =  y={-2} z={52\n    const [l_x1, l_y1, l_z1] = lenternPosition1.get();\n    const [l_x2, l_y2, l_z2] = lenternPosition2.get();\n    const [l_x3, l_y3, l_z3] = lenternPosition3.get();\n    const [l_x5, l_y5, l_z5] = lenternPosition5.get();\n    const [l_x6, l_y6, l_z6] = lenternPosition6.get();\n\n    const [c_x1, c_y1] = cameraPosition1.get();\n    const [c_x2, c_y2] = cameraPosition2.get();\n    const [c_x3, c_y3] = cameraPosition3.get();\n    const [c_x4, c_y4] = cameraPosition4.get();\n\n    const [cl_y2] = cameraLookAt2.get();\n    const [cl_y3] = cameraLookAt3.get();\n    const [cl_y4] = cameraLookAt4.get();\n\n    const cameraX = c_x1 + c_x2 + c_x3 + c_x4;\n    const cameraY = c_y1 + c_y2 + c_y3 + c_y4;\n    state.camera.lookAt(\n      new THREE.Vector3(cameraX, cameraY + cl_y2 + cl_y3 + cl_y4, 0)\n    );\n    state.camera.position.x = cameraX;\n    state.camera.position.y = cameraY;\n\n    ref.current.position.x = l_x1 + l_x2 + l_x3 + l_x5 + l_x6;\n    ref.current.position.y = l_y1 + l_y2 + l_y3 + l_y5 + l_y6;\n    ref.current.position.z = l_z1 + l_z2 + l_z3 + l_z5 + l_z6;\n  });\n\n  const animationReset = useCallback(async () => {\n    checkPointAPI1(() => ({\n      lenternPosition1: [0, 0, 0],\n      cameraPosition1: [0, 0, 0],\n      config: { duration: 1 },\n    }));\n    checkPointAPI2({\n      lenternPosition2: [0, 0, 0],\n      cameraPosition2: [0, 0, 0],\n      cameraLookAt2: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI3({\n      lenternPosition3: [0, 0, 0],\n      cameraPosition3: [0, 0, 0],\n      cameraLookAt3: [0, 0, 0],\n      config: { duration: 1 },\n    });\n    checkPointAPI4({\n      cameraPosition4: [0, 0, 0],\n      cameraLookAt4: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    // x : 30 + 15 + 19 = 64\n    // y : 27 + 12 + 14 = 53\n    // z : -5 + -15 + -20 = 40\n    checkPointAPI5({\n      lenternPosition5: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    checkPointAPI6({\n      lenternPosition6: [0, 0, 0],\n      config: { duration: 1 },\n    });\n\n    addLenterns();\n    setIsPlayAnimation(false);\n    setIntensity(0);\n  }, [\n    addLenterns,\n    checkPointAPI1,\n    checkPointAPI2,\n    checkPointAPI3,\n    checkPointAPI4,\n    checkPointAPI5,\n    checkPointAPI6,\n  ]);\n\n  const animationStart = useCallback(async () => {\n    // useChain([checkPoint1, checkPoint2, checkPoint3, checkPoint4, checkPoint5, checkPoint6], [0, 7, 12, 19, 22, 24]);\n\n    checkPointAPI1(() => ({\n      lenternPosition1: [30, 27, -5],\n      cameraPosition1: [20, 23, 0],\n      config: { duration: 7000, easing: easeInSine },\n    }));\n    closeTimeoutRef.current[0] = setTimeout(() => {\n      checkPointAPI2({\n        lenternPosition2: [15, 12, -15],\n        cameraPosition2: [2, 5, 0],\n        cameraLookAt2: [0, 3, 0],\n        config: { duration: 5000 },\n      });\n    }, 7000);\n    closeTimeoutRef.current[1] = setTimeout(() => {\n      checkPointAPI3({\n        lenternPosition3: [19, 14, -20],\n        cameraPosition3: [0, 0, 0],\n        cameraLookAt3: [0, 2, 0],\n        config: { duration: 5000, easing: easeOutSine },\n      });\n    }, 12000);\n    closeTimeoutRef.current[2] = setTimeout(() => {\n      checkPointAPI4({\n        cameraPosition4: [-22, -28, 0],\n        cameraLookAt4: [0, -5, 0],\n        config: { duration: 7000, easing: easeInOutSine },\n      });\n    }, 19000);\n    closeTimeoutRef.current[3] = setTimeout(() => {\n      // x : 30 + 15 + 19 = 64\n      // y : 27 + 12 + 14 = 53\n      // z : -5 + -15 + -20 = 40\n      checkPointAPI5({\n        lenternPosition5: [-64, -58, 30],\n        config: { duration: 1 },\n      });\n    }, 22000);\n    closeTimeoutRef.current[4] = setTimeout(() => {\n      checkPointAPI6({\n        lenternPosition6: [0, 5, 10],\n        config: { duration: 5000, easing: easeInOutSine },\n      });\n    }, 24000);\n\n    closeTimeoutRef.current[5] = setTimeout(() => {\n      animationReset();\n    }, 30000);\n  }, [\n    animationReset,\n    checkPointAPI1,\n    checkPointAPI2,\n    checkPointAPI3,\n    checkPointAPI4,\n    checkPointAPI5,\n    checkPointAPI6,\n  ]);\n\n  const onClick = useCallback(() => {\n    console.log(\"onClick\", isPlayAnimation);\n    if (!isPlayAnimation) {\n      console.log(\"!!!animationStart!!!\");\n      animationStart();\n      setIsPlayAnimation(true);\n    }\n  }, [animationStart, isPlayAnimation]);\n  // setIntensity(intensity + 0.1);\n\n  useEffect(() => {\n    console.log(\"useEffect\", Socket.instance);\n    Socket.instance?.on(\"upIntensity\", () => {\n      console.log(\"upIntensity\");\n      setIntensity((prev) => prev + 1);\n    });\n    Socket.instance?.on(\"animationStart\", () => {\n      console.log(\"animationStart\");\n      onClick();\n    });\n  }, [onClick]);\n\n  const onEnter = useCallback(() => {\n    setIntensity(intensity + 0.1);\n  }, [intensity]);\n  useEffect(\n    () => () => {\n      closeTimeoutRef.current.map((close) => close && close.current());\n    },\n    []\n  );\n\n  return (\n    <mesh ref={ref} onPointerEnter={onEnter} onClick={onClick}>\n      {/* <pointLight distance={10} position={[ x, y - 2.5, z + 1]} intensity={intensity} /> */}\n      <pointLight\n        distance={10}\n        position={[x + 5, y, z - 4]}\n        intensity={intensity}\n        color=\"#FFE97A\"\n      />\n      <pointLight\n        distance={10}\n        position={[x - 5, y, z + 1]}\n        intensity={intensity}\n        color=\"#FFE97A\"\n      />\n      <pointLight\n        distance={10}\n        position={[x, y, z + 9]}\n        intensity={intensity}\n        color=\"#FFE97A\"\n      />\n      <pointLight\n        distance={10}\n        position={[x + 5, y, z + 6]}\n        intensity={intensity}\n        color=\"#FFE97A\"\n      />\n\n      <pointLight position={[x, y - 2.5, z + 3]} intensity={0.6} />\n      {useMemo(\n        () => (\n          <LanternOfGLTF x={x} y={y} z={z} url=\"/lantern.glb\" />\n        ),\n        [x, y, z]\n      )}\n    </mesh>\n  );\n}\n","import React, { useEffect, useMemo } from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas, useThree } from \"@react-three/fiber\";\nimport { Html, useProgress, useGLTF } from \"@react-three/drei\";\n\n// import { OBJLoader } from 'three/examples/jsm/loaders/OBJLoader.js'\n// import { ColladaLoader } from 'three/examples/jsm/loaders/ColladaLoader'\n// import { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\n// import { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\n// import { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\n\nimport {\n  EffectComposer,\n  Bloom,\n  DepthOfField,\n  Noise,\n  Vignette,\n  SelectiveBloom,\n  BrightnessContrast,\n} from \"@react-three/postprocessing\";\nimport { /*BlurPass, */ Resizer, KernelSize } from \"postprocessing\";\n\nimport Controls from \"./Controls\";\n\nimport Model from \"./Main\";\n\nexport const LanternOfGLTF = React.forwardRef(({ x, y, z, url }, ref) => {\n  const { scene } = useGLTF(process.env.PUBLIC_URL + url);\n  const copiedScene = useMemo(() => scene.clone(), [scene]);\n  console.log(copiedScene);\n\n  return copiedScene ? (\n    <group ref={ref} position={[x, y, z]} scale={0.005}>\n      <primitive object={copiedScene} />\n    </group>\n  ) : null;\n});\n\nexport function Loader() {\n  const { progress } = useProgress();\n  return <Html center>{progress} % loaded</Html>;\n}\n\nconst path = \"/Skybox/nightsky_\";\nconst images = [\"lf\", \"rt\", \"up\", \"dn\", \"ft\", \"bk\"];\nconst ext = \".png\";\nconst imagePaths = images.map(\n  (img) => process.env.PUBLIC_URL + path + img + ext\n);\n\nexport const useSkybox = () => {\n  const { scene } = useThree();\n\n  useEffect(() => {\n    const loader = new THREE.CubeTextureLoader();\n    const mat = loader.load(imagePaths);\n    scene.background = mat;\n    // scene.environment = mat;\n  }, [scene]);\n\n  return null;\n};\n\nexport function SelectiveEffects({ lightsRefs, meshRefs }) {\n  return (\n    <SelectiveBloom\n      lights={lightsRefs} // ⚠️ REQUIRED! all relevant lights\n      selection={meshRefs} // selection of objects that will have bloom effect\n      selectionLayer={10} // selection layer\n      intensity={1.0} // The bloom intensity.\n      blurPass={undefined} // A blur pass.\n      width={Resizer.AUTO_SIZE} // render width\n      height={Resizer.AUTO_SIZE} // render height\n      kernelSize={KernelSize.LARGE} // blur kernel size\n      luminanceThreshold={0.9} // luminance threshold. Raise this value to mask out darker elements in the scene.\n      luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n    />\n  );\n}\n\nexport function Effects() {\n  // const AO = { samples: 3, luminanceInfluence: 0.6, radius: 2, intensity: 5 }\n  return (\n    <EffectComposer>\n      <BrightnessContrast\n        brightness={-0.27} // brightness. min: -1, max: 1\n        contrast={-0.3} // contrast: min -1, max: 1\n      />\n      <DepthOfField\n        focusDistance={0.03}\n        focalLength={0.07}\n        bokehScale={4}\n        height={480}\n      />\n      <Bloom\n        intensity={1.0} // The bloom intensity.\n        blurPass={undefined} // A blur pass.\n        width={Resizer.AUTO_SIZE} // render width\n        height={Resizer.AUTO_SIZE} // render height\n        kernelSize={KernelSize.LARGE} // blur kernel size\n        luminanceThreshold={0.1} // luminance threshold. Raise this value to mask out darker elements in the scene.\n        luminanceSmoothing={0.025} // smoothness of the luminance threshold. Range is [0, 1]\n      />\n      <Noise opacity={0.02} />\n      <Vignette eskil={false} offset={0.1} />\n\n      {/* <Noise opacity={0.02} /> */}\n      {/* // <EffectComposer> */}\n      {/* <DepthOfField focusDistance={0} focalLength={0.02} bokehScale={2} height={480} /> */}\n      {/* <Bloom luminanceThreshold={0} luminanceSmoothing={0.9} height={300} /> */}\n\n      {/* <Vignette eskil={false} offset={0.1} /> */}\n      {/* </EffectComposer> */}\n    </EffectComposer>\n  );\n}\n\nfunction Scene() {\n  useSkybox();\n  return null;\n}\n\nexport default function App() {\n  return (\n    <>\n      <Model />\n      <div style={{ position: \"absolute\", width: \"100%\", height: \"100%\" }}>\n        <Canvas\n          translate={true}\n          colorManagement\n          shadowMap\n          camera={{ position: [-5, 3, 6], fov: 60 }}\n        >\n          <Scene />\n          <Controls />\n          <gridHelper />\n        </Canvas>\n      </div>\n    </>\n  );\n}\n","import React, { useRef, useMemo } from \"react\";\nimport * as THREE from \"three\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { Box } from \"@react-three/drei\";\n\nimport { makeNoise4D } from \"fast-simplex-noise\";\nimport Controls from \"../Controls\";\n\nfunction rand(start, end) {\n  return Math.floor(Math.random() * (end - start + 1) + start);\n}\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction Scene() {\n  const _gridSize = {\n    x: 15,\n    y: 15,\n    z: 15,\n  };\n  const _increment = 0.08;\n  const _offset = {\n    x: 0,\n    y: 0,\n    z: 0,\n  };\n\n  const _arrowScale = 1;\n  const arrowHelperRefs = useRef(\n    Array.from(Array(_gridSize.x)).map((d, x) => {\n      return Array.from(Array(_gridSize.y)).map((d, y) => {\n        return Array.from(Array(_gridSize.z)).map((d, z) => {\n          return null;\n        });\n      });\n    })\n  );\n\n  const _amountOfParticles = 1000;\n  const _particleScale = 0.6;\n  const _particleMoveSpeed = 0.5;\n  const _particleRotationSpeed = 0.5;\n  const particleRef = useRef(\n    Array.from(Array(_amountOfParticles)).map(() => null)\n  );\n  // const _particleScale = 0.1;\n  const _particlePosition = useMemo(\n    () =>\n      Array.from(Array(_amountOfParticles)).map((d, z) => {\n        return new THREE.Vector3(\n          rand(0, _gridSize.x * _arrowScale),\n          rand(0, _gridSize.y * _arrowScale),\n          rand(0, _gridSize.z * _arrowScale)\n        );\n      }),\n    [_gridSize.x, _gridSize.y, _gridSize.z]\n  );\n  const [rotationEuler, rotationQuaternion] = useMemo(\n    () => [new THREE.Euler(0, 0, 0), new THREE.Quaternion(0, 0, 0, 0)],\n    []\n  );\n\n  const _noise = makeNoise4D();\n\n  const onFrameOfArrowHelper = (oldT) => {\n    let xOff = 0;\n    for (let x = 0; x < _gridSize.x; x++) {\n      let yOff = 0;\n      for (let y = 0; y < _gridSize.y; y++) {\n        let zOff = 0;\n        for (let z = 0; z < _gridSize.z; z++) {\n          const noise =\n            _noise(\n              xOff + _offset.x,\n              yOff + _offset.y,\n              zOff + _offset.z,\n              oldT / 50000\n            ) + 1;\n          const direction = new THREE.Vector3(\n            Math.cos(noise * Math.PI),\n            Math.sin(noise * Math.PI),\n            Math.cos(noise * Math.PI)\n          );\n\n          const normalDirection = direction.normalize();\n\n          arrowHelperRefs.current[x][y][z].setDirection(normalDirection);\n          arrowHelperRefs.current[x][y][z].setColor(\n            new THREE.Color(\n              normalDirection.x,\n              normalDirection.y,\n              normalDirection.z,\n              0.4\n            )\n          );\n          arrowHelperRefs.current[x][y][z].setLength(1);\n          zOff += _increment;\n        }\n        yOff += _increment;\n      }\n      xOff += _increment;\n    }\n  };\n\n  const onFrameForParticle = (deltaT) => {\n    for (let i = 0; i < _amountOfParticles; i++) {\n      applyRotation(particleRef.current[i], deltaT);\n    }\n  };\n\n  const applyRotation = (particleRef, deltaT) => {\n    const position = new THREE.Vector3(\n      Math.floor(\n        clamp(particleRef.position.x / _arrowScale, 0, _gridSize.x - 1)\n      ),\n      Math.floor(\n        clamp(particleRef.position.y / _arrowScale, 0, _gridSize.y - 1)\n      ),\n      Math.floor(\n        clamp(particleRef.position.z / _arrowScale, 0, _gridSize.z - 1)\n      )\n    );\n    // console.log(particleRef.position, position);\n    const arrowHelperRef =\n      arrowHelperRefs.current[position.x][position.y][position.z];\n    rotationEuler.set(\n      arrowHelperRef.rotation.x,\n      arrowHelperRef.rotation.y,\n      arrowHelperRef.rotation.z\n    );\n\n    rotationQuaternion.setFromEuler(rotationEuler);\n    particleRef.quaternion.rotateTowards(\n      rotationQuaternion,\n      _particleRotationSpeed * deltaT\n    );\n\n    particleRef.position.x +=\n      particleRef.rotation.x * _particleMoveSpeed * deltaT;\n    particleRef.position.y +=\n      particleRef.rotation.y * _particleMoveSpeed * deltaT;\n    particleRef.position.z +=\n      particleRef.rotation.z * _particleMoveSpeed * deltaT;\n\n    if (particleRef.position.x < 0) {\n      particleRef.position.x = _gridSize.x * _arrowScale;\n    }\n    if (particleRef.position.y < 0) {\n      particleRef.position.y = _gridSize.y * _arrowScale;\n    }\n    if (particleRef.position.z < 0) {\n      particleRef.position.z = _gridSize.z * _arrowScale;\n    }\n    if (particleRef.position.x > _gridSize.x * _arrowScale) {\n      particleRef.position.x = 0;\n    }\n    if (particleRef.position.y > _gridSize.y * _arrowScale) {\n      particleRef.position.y = 0;\n    }\n    if (particleRef.position.z > _gridSize.z * _arrowScale) {\n      particleRef.position.z = 0;\n    }\n    // quaternion\n\n    // console.log({\n    //   arrowHelperRef,\n    //   particleRef,\n    //   a: rotationQuaternion,\n    // });\n    // rotationQuaternion.set\n    return;\n  };\n\n  useFrame((state, delta) => {\n    // console.log(\"a\");\n    // console.log(state.clock.oldTime);\n    onFrameOfArrowHelper(state.clock.oldTime);\n    onFrameForParticle(delta);\n  });\n  console.log({ _amountOfParticles });\n\n  return (\n    <group>\n      {Array.from(Array(_amountOfParticles)).map((b, i) => {\n        return (\n          <Box\n            ref={(ref) => (particleRef.current[i] = ref)}\n            key={i}\n            position={_particlePosition[i]}\n            scale={_particleScale}\n          >\n            <meshBasicMaterial\n              transparent={true}\n              opacity={0.3}\n              attach=\"material\"\n              color=\"#fff\"\n            />\n          </Box>\n        );\n      })}\n      {Array.from(Array(_gridSize.x)).map((d, x) => {\n        return Array.from(Array(_gridSize.y)).map((d, y) => {\n          return Array.from(Array(_gridSize.z)).map((d, z) => {\n            return (\n              <arrowHelper\n                key={`${x}-${y}-${z}`}\n                ref={(ref) => (arrowHelperRefs.current[x][y][z] = ref)}\n                position={[x * _arrowScale, y * _arrowScale, z * _arrowScale]}\n                args={[new THREE.Vector3(0, 0, 0)]}\n                // setLength={(5, 1, 1)}\n              />\n            );\n          });\n        });\n      })}\n    </group>\n  );\n}\n\nexport default function Perlin() {\n  return (\n    <div style={{ position: \"absolute\", height: \"100%\", width: \"100%\" }}>\n      <Canvas\n        translate={true}\n        onCreated={(state) => state.gl.setClearColor(0xffffff, 0)}\n        colorManagement\n        shadowMap\n        camera={{ position: [0, 0, 77], fov: 60 }}\n      >\n        <Scene />\n        <Controls />\n        <gridHelper />\n      </Canvas>\n    </div>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createBrowserHistory } from \"history\";\n\nexport default createBrowserHistory({\n  basename: process.env.PUBLIC_URL,\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport Camera from \"./Camera\";\nimport Ocean from \"./Ocean\";\nimport Perlin from \"./Perlin\";\n\nimport Main from \"./Main\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport { Router, Switch, Route } from \"react-router-dom\";\n\nimport Socket from \"./utils/socket\";\nimport history from \"./utils/browserHistory\";\n\nSocket.init();\n\nReactDOM.render(\n  <Router history={history}>\n    <Switch>\n      <Route exact path=\"/\" component={App} />\n      <Route exact path=\"/main\" component={Main} />\n      <Route exact path=\"/camera\" component={Camera} />\n      <Route exact path=\"/ocean\" component={Ocean} />\n      <Route exact path=\"/perlin\" component={Perlin} />\n    </Switch>\n  </Router>,\n  // <Main />,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\n\nimport \"@tensorflow/tfjs-backend-cpu\";\nimport \"@tensorflow/tfjs-backend-webgl\";\nimport \"@tensorflow/tfjs\";\nimport * as cocoSSD from \"@tensorflow-models/coco-ssd\";\n\nimport Socket from \"../utils/socket\";\n\nexport default function Camera() {\n  const [model, setModel] = useState(null);\n  const animationFrameRef = useRef(null);\n  const [isDetected, setIsDetected] = useState(false);\n  const [detectionArea, setDetectionArea] = useState({\n    x: 300,\n    y: 300,\n    width: 50,\n    height: 50,\n  });\n  const video = useRef(null);\n  const canvas = useRef(null);\n\n  const webcamInit = useCallback(() => {\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: false,\n        video: { facingMode: \"user\" },\n      })\n      .then((stream) => {\n        video.current.srcObject = stream;\n        video.current.onloadedmetadata = () => {\n          video.current.play();\n        };\n      });\n  }, []);\n\n  const renderPredictions = useCallback(\n    (predictions) => {\n      const ctx = canvas.current.getContext(\"2d\");\n      canvas.current.width = video.current.videoWidth;\n      canvas.current.height = video.current.videoHeight;\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n      // Fonts\n      const font = \"16px sans-serif\";\n      ctx.font = font;\n      ctx.textBaseline = \"top\";\n      ctx.drawImage(\n        video.current,\n        0,\n        0,\n        video.current.videoWidth,\n        video.current.videoHeight\n      );\n\n      let check = false;\n\n      ctx.strokeStyle = \"green\";\n      ctx.lineWidth = 3;\n      // Draw the bounding\n      ctx.strokeRect(\n        detectionArea.x,\n        detectionArea.y,\n        detectionArea.width,\n        detectionArea.height\n      );\n\n      predictions.forEach((prediction) => {\n        // Bounding boxes's coordinates and sizes\n        const x = prediction.bbox[0];\n        const y = prediction.bbox[1];\n        const width = prediction.bbox[2];\n        const height = prediction.bbox[3];\n        // Bounding box style\n        ctx.strokeStyle = \"#00FFFF\";\n        ctx.lineWidth = 2;\n        // Draw the bounding\n        ctx.strokeRect(x, y, width, height);\n\n        // Label background\n        ctx.fillStyle = \"#00FFFF\";\n        const textWidth = ctx.measureText(prediction.class).width;\n        const textHeight = parseInt(font, 10); // base 10\n        ctx.fillRect(x, y, textWidth + 4, textHeight + 4);\n\n        if (prediction.class === \"person\") {\n          const res = rectCollisionDetection(\n            {\n              x,\n              y,\n              width,\n              height,\n            },\n            detectionArea\n          );\n\n          if (res) check = true;\n        }\n      });\n\n      setIsDetected(check);\n\n      predictions.forEach((prediction) => {\n        // Write prediction class names\n        const x = prediction.bbox[0];\n        const y = prediction.bbox[1];\n        ctx.fillStyle = \"#000000\";\n        ctx.fillText(prediction.class, x, y);\n      });\n    },\n    [detectionArea]\n  );\n\n  const detectFrame = useCallback(\n    (video, model) => {\n      model.detect(video).then((predictions) => {\n        renderPredictions(predictions);\n        animationFrameRef.current &&\n          cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = requestAnimationFrame(() => {\n          detectFrame(video, model);\n        });\n      });\n    },\n    [renderPredictions]\n  );\n\n  const rectCollisionDetection = (rect1, rect2) => {\n    if (\n      rect1.x < rect2.x + rect2.width &&\n      rect1.x + rect1.width > rect2.x &&\n      rect1.y < rect2.y + rect2.height &&\n      rect1.y + rect1.height > rect2.y\n    ) {\n      return true;\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    if (Socket.instance) {\n      Socket.instance.emit(\"animationStart\");\n    }\n  }, [isDetected]);\n\n  useEffect(() => {\n    if (model) {\n      detectFrame(video.current, model);\n    }\n  }, [model, detectFrame]);\n\n  useEffect(() => {\n    webcamInit();\n  }, [webcamInit]);\n\n  return (\n    <div\n      style={{\n        width: window.innerWidth,\n        height: window.innerHeight,\n        textAlign: \"center\",\n        overflow: \"hidden\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        backgroundColor: \"#333\",\n      }}\n    >\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          width: \"100%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          backgroundColor: \"rgba(0, 0, 0, 0.3)\",\n        }}\n      >\n        <h1 style={{ color: \"#fff\" }}>사람 인식</h1>\n        <p style={{ color: \"#fff\" }}>초록 범위에 사람이 들어오면 알 수 있음!</p>\n      </div>\n      <video\n        style={{ display: \"none\" }}\n        onLoadedData={async () => {\n          const m = await cocoSSD.load({});\n          setModel(m);\n        }}\n        ref={(ref) => (video.current = ref)}\n      />\n\n      <canvas\n        style={{ border: isDetected ? \"5px solid red\" : \"5px solid #fff\" }}\n        ref={(ref) => (canvas.current = ref)}\n      />\n      <div style={{ color: \"#fff\", marginLeft: \"16px\" }}>\n        <div>\n          x :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, x: e.target.value }))\n            }\n            value={detectionArea.x}\n          />\n        </div>\n        <div>\n          y :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, y: e.target.value }))\n            }\n            value={detectionArea.y}\n          />\n        </div>\n        <div>\n          w :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, width: e.target.value }))\n            }\n            value={detectionArea.width}\n          />\n        </div>\n        <div>\n          h :\n          <input\n            type=\"number\"\n            onChange={(e) =>\n              setDetectionArea((prev) => ({ ...prev, height: e.target.value }))\n            }\n            value={detectionArea.height}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"sourceRoot":""}