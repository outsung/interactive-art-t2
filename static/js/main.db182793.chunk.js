(this["webpackJsonpinteractive-art-t2"]=this["webpackJsonpinteractive-art-t2"]||[]).push([[0],{379:function(t,e,n){},412:function(t,e){},413:function(t,e){},421:function(t,e){},424:function(t,e){},425:function(t,e){},436:function(t,e,n){"use strict";n.r(e);var r=n(16),c=n.n(r),o=n(178),i=n.n(o),a=(n(379),n(1)),s=n(44),u=n(441),j=(n(439),n(440),n(136)),l=n(42),b=n(36),f=n(316),O=n(26);function d(t){var e=Object(s.g)(),n=e.camera,c=e.gl.domElement,o=Object(r.useRef)({});return Object(s.e)((function(){return o.current.update()})),Object(O.jsx)("orbitControls",Object(b.a)(Object(b.a)({},t),{},{ref:o,args:[n,c]}))}Object(s.d)({OrbitControls:f.a});var h=n(8),g=n.n(h),p=n(14),x=n(23),m=n(6),v=(n(374),n(438)),y=n(76),w=n(443),P=n(444);function k(){var t=Object(r.useRef)(),e=Object(s.g)((function(t){return t.gl})),n=Object(s.f)(a.TextureLoader,"/interactive-art-t2/waternormals.jpeg");n.wrapS=n.wrapT=a.RepeatWrapping;var c=Object(r.useMemo)((function(){return new a.PlaneGeometry(1e4,1e4)}),[]),o=Object(r.useMemo)((function(){return{textureWidth:512,textureHeight:512,waterNormals:n,sunDirection:new a.Vector3,sunColor:0,waterColor:0,distortionScale:3.7,fog:!1,format:e.encoding}}),[e.encoding,n]);return Object(s.e)((function(e,n){return t.current.material.uniforms.time.value+=n})),Object(O.jsx)("water",{ref:t,args:[c,o],"position-y":-5,"rotation-x":-Math.PI/2})}function S(){var t=Object(r.useRef)();return Object(s.e)((function(e,n){t.current.position.y=10+20*Math.sin(e.clock.elapsedTime),t.current.rotation.x=t.current.rotation.y=t.current.rotation.z+=n})),Object(O.jsx)(D,{ref:t,x:0,y:0,z:0,url:"/lantern.glb"})}Object(s.d)({Water:v.a});var A=n(2),M=n(319),C=n.n(M),L=function t(){Object(A.a)(this,t)};L.instance=null,L.init=function(){L.instance=C()("https://interactive-art-t2-server.herokuapp.com",{forceNew:!0,timeout:5e3,transports:["websocket"]})},L.disconnect=function(){var t;return null===(t=L.instance)||void 0===t?void 0:t.close()},Object(s.d)({Water:v.a});function F(t){var e=t.d,n=t.t,c=t.children,o=Object(r.useRef)(),i=Object(y.useSpring)({from:{springXZ:-1},to:{springXZ:1},loop:{reverse:!0},config:{duration:n/3*2}}).springXZ,a=Object(y.useSpring)({from:{springY:-1},to:{springY:1},loop:{reverse:!0},config:{duration:n}}).springY;return Object(s.e)((function(){o.current.position.z=Math.cos(i.get())*e/2,o.current.position.x=Math.sin(i.get())*e/2,o.current.position.y=Math.sin(a.get())*e})),Object(O.jsx)(y.a.group,{ref:o,children:c})}var R=function(){return Object(O.jsx)(D,{x:Math.floor(200*Math.random()-100),y:Math.floor(30*Math.random()),z:Math.floor(100*Math.random()-50),url:"/lantern.glb"})};function E(){var t=Object(r.useState)(Array.from(Array(100)).map((function(t,e){return Object(O.jsx)(R,{},e)}))),e=Object(m.a)(t,2),n=e[0],c=e[1],o=Object(r.useCallback)((function(){c((function(t){return[].concat(Object(x.a)(t),[Object(O.jsx)(R,{},t.length+1)])}))}),[]);return V(),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("pointLight",{position:[0,-10,0],intensity:1.5}),Object(O.jsx)(B,{}),Object(O.jsxs)(r.Suspense,{fallback:Object(O.jsx)(O.Fragment,{}),children:[Object(O.jsx)(k,{}),Object(O.jsx)(F,{t:3e3,d:.1,children:n}),Object(O.jsx)("pointLight",{position:[0,-4,10],intensity:1.5}),Object(r.useMemo)((function(){return Object(O.jsx)(H,{addLenterns:o,x:-4,y:-2,z:52})}),[o])]})]})}function T(){return Object(O.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:100},children:Object(O.jsxs)(s.a,{translate:!0,onCreated:function(t){return t.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,70],fov:60},children:[Object(O.jsx)(E,{}),Object(O.jsx)(d,{}),Object(O.jsx)("gridHelper",{})]})})}function I(t){return 1-Math.cos(t*Math.PI/2)}function z(t){return Math.sin(t*Math.PI/2)}function W(t){return-(Math.cos(Math.PI*t)-1)/2}function H(t){var e=t.addLenterns,n=t.x,c=t.y,o=t.z,i=Object(r.useState)(!1),u=Object(m.a)(i,2),j=u[0],l=u[1],b=Object(r.useState)(0),f=Object(m.a)(b,2),d=f[0],h=f[1],x=Object(r.useRef)(),v=Object(r.useRef)([]),w=Object(y.useSpringRef)(),P=Object(y.useSpring)((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0],ref:w}})),k=Object(m.a)(P,2),S=k[0],A=S.lenternPosition1,M=S.cameraPosition1,C=k[1],F=Object(y.useSpringRef)(),R=Object(y.useSpring)((function(){return{lenternPosition2:[0,0,0],cameraPosition2:[0,0],cameraLookAt2:[0],ref:F}})),E=Object(m.a)(R,2),T=E[0],H=T.lenternPosition2,Z=T.cameraPosition2,V=T.cameraLookAt2,B=E[1],U=Object(y.useSpringRef)(),X=Object(y.useSpring)((function(){return{lenternPosition3:[0,0,0],cameraPosition3:[0,0],cameraLookAt3:[0],ref:U}})),Y=Object(m.a)(X,2),_=Y[0],G=_.lenternPosition3,J=_.cameraPosition3,N=_.cameraLookAt3,q=Y[1],K=Object(y.useSpringRef)(),Q=Object(y.useSpring)((function(){return{cameraPosition4:[0,0],cameraLookAt4:[0],ref:K}})),$=Object(m.a)(Q,2),tt=$[0],et=tt.cameraPosition4,nt=tt.cameraLookAt4,rt=$[1],ct=Object(y.useSpringRef)(),ot=Object(y.useSpring)((function(){return{lenternPosition5:[0,0,0],ref:ct}})),it=Object(m.a)(ot,2),at=it[0].lenternPosition5,st=it[1],ut=Object(y.useSpringRef)(),jt=Object(y.useSpring)((function(){return{lenternPosition6:[0,0,0],ref:ut}})),lt=Object(m.a)(jt,2),bt=lt[0].lenternPosition6,ft=lt[1];Object(s.e)((function(t){var e=A.get(),n=Object(m.a)(e,3),r=n[0],c=n[1],o=n[2],i=H.get(),s=Object(m.a)(i,3),u=s[0],j=s[1],l=s[2],b=G.get(),f=Object(m.a)(b,3),O=f[0],d=f[1],h=f[2],g=at.get(),p=Object(m.a)(g,3),v=p[0],y=p[1],w=p[2],P=bt.get(),k=Object(m.a)(P,3),S=k[0],C=k[1],L=k[2],F=M.get(),R=Object(m.a)(F,2),E=R[0],T=R[1],I=Z.get(),z=Object(m.a)(I,2),W=z[0],D=z[1],B=J.get(),U=Object(m.a)(B,2),X=U[0],Y=U[1],_=et.get(),q=Object(m.a)(_,2),K=q[0],Q=q[1],$=V.get(),tt=Object(m.a)($,1)[0],rt=N.get(),ct=Object(m.a)(rt,1)[0],ot=nt.get(),it=Object(m.a)(ot,1)[0],st=E+W+X+K,ut=T+D+Y+Q;t.camera.lookAt(new a.Vector3(st,ut+tt+ct+it,0)),t.camera.position.x=st,t.camera.position.y=ut,x.current.position.x=r+u+O+v+S,x.current.position.y=c+j+d+y+C,x.current.position.z=o+l+h+w+L}));var Ot=Object(r.useCallback)(Object(p.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C((function(){return{lenternPosition1:[0,0,0],cameraPosition1:[0,0,0],config:{duration:1}}})),B({lenternPosition2:[0,0,0],cameraPosition2:[0,0,0],cameraLookAt2:[0,0,0],config:{duration:1}}),q({lenternPosition3:[0,0,0],cameraPosition3:[0,0,0],cameraLookAt3:[0,0,0],config:{duration:1}}),rt({cameraPosition4:[0,0,0],cameraLookAt4:[0,0,0],config:{duration:1}}),st({lenternPosition5:[0,0,0],config:{duration:1}}),ft({lenternPosition6:[0,0,0],config:{duration:1}}),e(),l(!1),h(0);case 9:case"end":return t.stop()}}),t)}))),[e,C,B,q,rt,st,ft]),dt=Object(r.useCallback)(Object(p.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:C((function(){return{lenternPosition1:[30,27,-5],cameraPosition1:[20,23,0],config:{duration:7e3,easing:I}}})),v.current[0]=setTimeout((function(){B({lenternPosition2:[15,12,-15],cameraPosition2:[2,5,0],cameraLookAt2:[0,3,0],config:{duration:5e3}})}),7e3),v.current[1]=setTimeout((function(){q({lenternPosition3:[19,14,-20],cameraPosition3:[0,0,0],cameraLookAt3:[0,2,0],config:{duration:5e3,easing:z}})}),12e3),v.current[2]=setTimeout((function(){rt({cameraPosition4:[-22,-28,0],cameraLookAt4:[0,-5,0],config:{duration:7e3,easing:W}})}),19e3),v.current[3]=setTimeout((function(){st({lenternPosition5:[-64,-58,30],config:{duration:1}})}),22e3),v.current[4]=setTimeout((function(){ft({lenternPosition6:[0,5,10],config:{duration:5e3,easing:W}})}),24e3),v.current[5]=setTimeout((function(){Ot()}),3e4);case 7:case"end":return t.stop()}}),t)}))),[Ot,C,B,q,rt,st,ft]),ht=Object(r.useCallback)((function(){console.log("onClick",j),j||(console.log("!!!animationStart!!!"),dt(),l(!0))}),[dt,j]);Object(r.useEffect)((function(){var t,e;console.log("useEffect",L.instance),null===(t=L.instance)||void 0===t||t.on("upIntensity",(function(){console.log("upIntensity"),h((function(t){return t+1}))})),null===(e=L.instance)||void 0===e||e.on("animationStart",(function(){console.log("animationStart"),ht()}))}),[ht]);var gt=Object(r.useCallback)((function(){h(d+.1)}),[d]);return Object(r.useEffect)((function(){return function(){v.current.map((function(t){return t&&t.current()}))}}),[]),Object(O.jsxs)("mesh",{ref:x,onPointerEnter:gt,onClick:ht,children:[Object(O.jsx)("pointLight",{distance:10,position:[n+5,c,o-4],intensity:d,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n-5,c,o+1],intensity:d,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n,c,o+9],intensity:d,color:"#FFE97A"}),Object(O.jsx)("pointLight",{distance:10,position:[n+5,c,o+6],intensity:d,color:"#FFE97A"}),Object(O.jsx)("pointLight",{position:[n,c-2.5,o+3],intensity:.6}),Object(r.useMemo)((function(){return Object(O.jsx)(D,{x:n,y:c,z:o,url:"/lantern.glb"})}),[n,c,o])]})}var D=c.a.forwardRef((function(t,e){var n=t.x,c=t.y,o=t.z,i=t.url,a=Object(u.a)("/interactive-art-t2"+i).scene,s=Object(r.useMemo)((function(){return a.clone()}),[a]);return console.log(s),s?Object(O.jsx)("group",{ref:e,position:[n,c,o],scale:.005,children:Object(O.jsx)("primitive",{object:s})}):null}));var Z=["lf","rt","up","dn","ft","bk"].map((function(t){return"/interactive-art-t2/Skybox/nightsky_"+t+".png"})),V=function(){var t=Object(s.g)().scene;return Object(r.useEffect)((function(){var e=(new a.CubeTextureLoader).load(Z);t.background=e}),[t]),null};function B(){return Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{brightness:-.27,contrast:-.3}),Object(O.jsx)(j.c,{focusDistance:.03,focalLength:.07,bokehScale:4,height:480}),Object(O.jsx)(j.a,{intensity:1,blurPass:void 0,width:l.y.AUTO_SIZE,height:l.y.AUTO_SIZE,kernelSize:l.r.LARGE,luminanceThreshold:.1,luminanceSmoothing:.025}),Object(O.jsx)(j.e,{opacity:.02}),Object(O.jsx)(j.g,{eskil:!1,offset:.1})]})}function U(){return V(),null}n(235),n(234),n(435);var X=n(371);var Y=n(372),_=n.n(Y),G=1;function J(){var t=10,e=10,n=10,c=6.18,o=Object(r.useRef)(Array.from(Array(t)).map((function(t,r){return Array.from(Array(e)).map((function(t,e){return Array.from(Array(n)).map((function(t,e){return null}))}))}))),i=new _.a,u=function(r){i.noiseSeed(G++);for(var s=0,u=0;u<t;u++){for(var j=0,l=0;l<e;l++){for(var b=0,f=0;f<n;f++){var O=1*i.get(s,j,b),d=new a.Vector3(Math.cos(O,Math.PI),Math.sin(O,Math.PI),Math.cos(O,Math.PI));o.current[u][l][f].setDirection(d),o.current[u][l][f].setLength(1),b+=c}j+=c}s+=c}};return Object(s.e)((function(t,e){console.log("a"),u(t.clock.oldTime)})),Object(O.jsx)("group",{onClick:u,children:Array.from(Array(t)).map((function(t,r){return Array.from(Array(e)).map((function(t,e){return Array.from(Array(n)).map((function(t,n){return Object(O.jsx)("arrowHelper",{ref:function(t){return o.current[r][e][n]=t},position:[r,e,n],args:[new a.Vector3(0,0,0)]})}))}))}))})}var N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,445)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),o(t),i(t)}))},q=n(442),K=n(118),Q=Object(K.a)({basename:"/interactive-art-t2"});L.init(),i.a.render(Object(O.jsx)(q.b,{history:Q,children:Object(O.jsxs)(q.c,{children:[Object(O.jsx)(q.a,{exact:!0,path:"/",component:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T,{}),Object(O.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%"},children:Object(O.jsxs)(s.a,{translate:!0,colorManagement:!0,shadowMap:!0,camera:{position:[-5,3,6],fov:60},children:[Object(O.jsx)(U,{}),Object(O.jsx)(d,{}),Object(O.jsx)("gridHelper",{})]})})]})}}),Object(O.jsx)(q.a,{exact:!0,path:"/main",component:T}),Object(O.jsx)(q.a,{exact:!0,path:"/camera",component:function(){var t=Object(r.useState)(null),e=Object(m.a)(t,2),n=e[0],c=e[1],o=Object(r.useRef)(null),i=Object(r.useState)(!1),a=Object(m.a)(i,2),s=a[0],u=a[1],j=Object(r.useState)({x:300,y:300,width:50,height:50}),l=Object(m.a)(j,2),f=l[0],d=l[1],h=Object(r.useRef)(null),x=Object(r.useRef)(null),v=Object(r.useCallback)((function(){navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then((function(t){h.current.srcObject=t,h.current.onloadedmetadata=function(){h.current.play()}}))}),[]),y=Object(r.useCallback)((function(t){var e=x.current.getContext("2d");x.current.width=h.current.videoWidth,x.current.height=h.current.videoHeight,e.clearRect(0,0,e.canvas.width,e.canvas.height);var n="16px sans-serif";e.font=n,e.textBaseline="top",e.drawImage(h.current,0,0,h.current.videoWidth,h.current.videoHeight);var r=!1;e.strokeStyle="green",e.lineWidth=3,e.strokeRect(f.x,f.y,f.width,f.height),t.forEach((function(t){var c=t.bbox[0],o=t.bbox[1],i=t.bbox[2],a=t.bbox[3];e.strokeStyle="#00FFFF",e.lineWidth=2,e.strokeRect(c,o,i,a),e.fillStyle="#00FFFF";var s=e.measureText(t.class).width,u=parseInt(n,10);(e.fillRect(c,o,s+4,u+4),"person"===t.class)&&(P({x:c,y:o,width:i,height:a},f)&&(r=!0))})),u(r),t.forEach((function(t){var n=t.bbox[0],r=t.bbox[1];e.fillStyle="#000000",e.fillText(t.class,n,r)}))}),[f]),w=Object(r.useCallback)((function(t,e){e.detect(t).then((function(n){y(n),o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame((function(){w(t,e)}))}))}),[y]),P=function(t,e){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y};return Object(r.useEffect)((function(){L.instance&&L.instance.emit("animationStart")}),[s]),Object(r.useEffect)((function(){n&&w(h.current,n)}),[n,w]),Object(r.useEffect)((function(){v()}),[v]),Object(O.jsxs)("div",{style:{width:window.innerWidth,height:window.innerHeight,textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#333"},children:[Object(O.jsxs)("div",{style:{position:"absolute",top:0,width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.3)"},children:[Object(O.jsx)("h1",{style:{color:"#fff"},children:"\uc0ac\ub78c \uc778\uc2dd"}),Object(O.jsx)("p",{style:{color:"#fff"},children:"\ucd08\ub85d \ubc94\uc704\uc5d0 \uc0ac\ub78c\uc774 \ub4e4\uc5b4\uc624\uba74 \uc54c \uc218 \uc788\uc74c!"})]}),Object(O.jsx)("video",{style:{display:"none"},onLoadedData:Object(p.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.load({});case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}),t)}))),ref:function(t){return h.current=t}}),Object(O.jsx)("canvas",{style:{border:s?"5px solid red":"5px solid #fff"},ref:function(t){return x.current=t}}),Object(O.jsxs)("div",{style:{color:"#fff",marginLeft:"16px"},children:[Object(O.jsxs)("div",{children:["x :",Object(O.jsx)("input",{type:"number",onChange:function(t){return d((function(e){return Object(b.a)(Object(b.a)({},e),{},{x:t.target.value})}))},value:f.x})]}),Object(O.jsxs)("div",{children:["y :",Object(O.jsx)("input",{type:"number",onChange:function(t){return d((function(e){return Object(b.a)(Object(b.a)({},e),{},{y:t.target.value})}))},value:f.y})]}),Object(O.jsxs)("div",{children:["w :",Object(O.jsx)("input",{type:"number",onChange:function(t){return d((function(e){return Object(b.a)(Object(b.a)({},e),{},{width:t.target.value})}))},value:f.width})]}),Object(O.jsxs)("div",{children:["h :",Object(O.jsx)("input",{type:"number",onChange:function(t){return d((function(e){return Object(b.a)(Object(b.a)({},e),{},{height:t.target.value})}))},value:f.height})]})]})]})}}),Object(O.jsx)(q.a,{exact:!0,path:"/ocean",component:function(){return Object(O.jsxs)(s.a,{camera:{position:[0,5,100],fov:55,near:1,far:2e4},children:[Object(O.jsx)("pointLight",{position:[100,100,100]}),Object(O.jsx)("pointLight",{position:[-100,-100,-100]}),Object(O.jsxs)(r.Suspense,{fallback:null,children:[Object(O.jsx)(k,{}),Object(O.jsx)(S,{})]}),Object(O.jsx)(w.a,{scale:1e3,sunPosition:[500,150,-1e3],turbidity:.1}),Object(O.jsx)(P.a,{})]})}}),Object(O.jsx)(q.a,{exact:!0,path:"/perlin",component:function(){return Object(O.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%"},children:Object(O.jsxs)(s.a,{translate:!0,onCreated:function(t){return t.gl.setClearColor(16777215,0)},colorManagement:!0,shadowMap:!0,camera:{position:[0,0,77],fov:60},children:[Object(O.jsx)(J,{}),Object(O.jsx)(d,{}),Object(O.jsx)("gridHelper",{})]})})}})]})}),document.getElementById("root")),N()}},[[436,1,2]]]);
//# sourceMappingURL=main.db182793.chunk.js.map